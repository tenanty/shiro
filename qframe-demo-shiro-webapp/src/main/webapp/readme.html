<html lang="zh-CN" xml:lang="zh-CN" xmlns="http://www.w3.org/1999/xhtml"><head><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}</style>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Language" content="zh-CN">
  <meta name="robots" content="index, follow">
  <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
  <title>Shiro 那点事儿 -  黄勇 - 开源中国社区</title>
    <meta name="Keywords" content="Java那点事儿,Shiro">
      <meta name="Description" content="Shiro 那点事儿：前几天我遇见了一位美女，真有种相逢恨晚的感觉。她皮肤白皙、气质优雅、楚楚动人，拥有苗条的身材，却又...">
    <link rel="stylesheet/less" href="http://my.oschina.net/huangyong/styles.less?ver=20140612&amp;date=20140609225942" type="text/css" media="screen">
  <link rel="stylesheet" href="/js/2012/poshytip/tip-yellowsimple/tip-yellowsimple.css" type="text/css">
  <link rel="stylesheet" type="text/css" href="/js/2011/fancybox/jquery.fancybox-1.3.4.css" media="screen">
  <script async="" type="text/javascript" src="http://www.gstatic.com/pub-config/ca-pub-1307862221338762.js"></script><script type="text/javascript" src="/js/2012/jquery-1.7.1.min.js"></script>
  <script type="text/javascript" src="/js/2012/jquery.form.js"></script>
  <script type="text/javascript" src="/js/2011/fancybox/jquery.fancybox-1.3.4.pack.js?2014031702"></script>
  <script type="text/javascript" src="/js/2012/poshytip/jquery.poshytip.min.js"></script>
  <script type="text/javascript" src="/js/2011/oschina.js?ver=20121007"></script>
  <script type="text/javascript" src="/js/2012/less-1.3.0.min.js"></script><style type="text/css" media="screen" id="less:huangyong-styles">:focus {
  outline: 0;
}
* {
  padding: 0;
  margin: 0;
}
a {
  color: #4466bb;
  outline: 0;
}
a:hover {
  color: #0000aa;
}
ul,
ol {
  list-style-type: none;
}
img {
  border: 0;
}
textarea {
  resize: none;
}
body {
  background: #f9f9f9;
  text-align: center;
  font-size: 10pt;
}
label.SELECTED {
  color: #A00;
  font-weight: bold;
}
.clear {
  clear: both;
  font-size: 1px;
  line-height: 0;
}
.clearfix:after {
  content: ".";
  display: block;
  clear: both;
  visibility: hidden;
  line-height: 0;
  height: 0;
}
.clearfix {
  display: inline-block;
}
html[xmlns] .clearfix {
  display: block;
}
* html .clearfix {
  height: 1%;
}
.ostable {
  width: 100%;
  table-layout: fixed;
}
.ostable td {
  vertical-align: top;
  overflow: hidden;
}
.highlight {
  color: #A00;
  padding: 0 1px;
  margin: 0 2px;
}
.NoData {
  text-align: center;
  padding: 20px 0;
  color: #999999;
}
a.tag {
  background-color: #E0EAF1;
  border-bottom: 1px solid #3E6D8E;
  border-right: 1px solid #7F9FB6;
  color: #3E6D8E;
  font-size: 8pt;
  line-height: 2.4;
  margin: 2px 2px 2px 0;
  padding: 2px 4px;
  text-decoration: none;
  white-space: nowrap;
}
a.tag:hover {
  background-color: #3E6D8E;
  color: #fff;
}
a.project {
  background-color: #cfc;
  color: #060;
}
a.project:hover {
  background-color: #5cc26f;
  color: #fff;
}
a.rndbutton {
  background: #5cc26f;
  color: #fff;
  text-decoration: none;
  height: 30px;
  float: left;
  margin: 0;
  border: 0px solid #000;
  font-weight: bold;
  cursor: pointer;
}
a.rndbutton:hover {
  background: #40ab54;
}
a.rndbutton:hover span {
  background: #40ab54;
  color: #fff;
}
a.rndbutton span {
  background: #5cc26f;
  color: #fff;
  float: left;
  margin: 0 0 0 12px;
  padding: 0 12px 0 0;
  height: 30px;
  line-height: 30px;
}
.obj_type_1 a.title {
  background: url('/img/a2.gif') no-repeat left center;
  background-position: 5px;
}
.obj_type_2 a.title {
  background: url('/img/thread.gif') no-repeat left center;
  background-position: 5px;
}
.obj_type_3 a.title {
  background: url('/img/thread.gif') no-repeat left center;
  background-position: 5px;
}
.obj_type_4 a.title {
  background: url('/img/a3.gif') no-repeat left center;
  background-position: 5px;
}
.obj_type_5 a.title {
  background: url('/img/code.gif') no-repeat left center;
}
.obj_type_7 a.title {
  background: url('/img/a3.gif') no-repeat left center;
  background-position: 5px;
}
.init_degree {
  -webkit-transform: rotate(0deg);
  -moz-transform: rotate(0deg);
  -o-transform: rotate(0deg);
  -ms-transform: rotate(0deg);
  -webkit-transform-origin: 0 0;
  -moz-transform-origin: 0 0;
  -o-transform-origin: 0 0;
  -ms-transform-origin: 0 0;
}
.first_degree {
  -webkit-transform: rotate(-90deg) translate(-100%);
  -moz-transform: rotate(-90deg) translate(-100%);
  -o-transform: rotate(-90deg) translate(-100%);
  -ms-transform: rotate(-90deg) translate(-100%);
  -webkit-transform-origin: 0 0;
  -moz-transform-origin: 0 0;
  -o-transform-origin: 0 0;
  -ms-transform-origin: 0 0;
}
.second_degree {
  -webkit-transform: rotate(-180deg) translate(-100%, -100%);
  -moz-transform: rotate(-180deg) translate(-100%, -100%);
  -o-transform: rotate(-180deg) translate(-100%, -100%);
  -ms-transform: rotate(-180deg) translate(-100%, -100%);
  -webkit-transform-origin: 0 0;
  -moz-transform-origin: 0 0;
  -o-transform-origin: 0 0;
  -ms-transform-origin: 0 0;
}
.third_degree {
  -webkit-transform: rotate(-270deg) translate(0, -100%);
  -moz-transform: rotate(-270deg) translate(0, -100%);
  -o-transform: rotate(-270deg) translate(0, -100%);
  -ms-transform: rotate(-270deg) translate(0, -100%);
  -webkit-transform-origin: 0 0;
  -moz-transform-origin: 0 0;
  -o-transform-origin: 0 0;
  -ms-transform-origin: 0 0;
}
#OSC_Screen {
  width: 98%;
  margin: 0px auto;
  text-align: left;
  padding: 0 4px;
  margin-bottom: 50px;
}
#OSC_Banner {
  background: #40aa53;
  border-top: 0;
  height: 36px;
  padding: 2px 5px 0 5px;
}
#OSC_Banner #OSC_Logo {
  float: left;
  margin: 1px 0 0 2px;
  width: 105px;
}
#OSC_Banner #OSC_Logo a {
  float: left;
  background: url('/img/2012/osc2.png') no-repeat 0 1px;
  width: 100px;
  height: 34px;
  text-indent: -9999px;
}
#OSC_Banner #OSC_Slogon {
  float: left;
  margin: 10px 0 0 10px;
  color: #f2f2f2;
}
#OSC_Banner #OSC_Slogon a {
  color: #fff;
}
#OSC_Banner #OSC_Channels {
  margin-right: 10px;
  float: right;
  font-weight: bold;
  font-size: 10.5pt;
  height: 35px;
  line-height: 35px;
}
#OSC_Banner #OSC_Channels ul li {
  float: left;
  margin: 0px 5px 0 10px;
}
#OSC_Banner #OSC_Channels ul li a {
  text-decoration: none;
  color: #f2f2f2;
  padding: 2px;
}
#OSC_Banner #OSC_Channels ul li a:hover {
  color: #fff;
}
#OSC_Notification {
  width: 200px;
  margin-left: 10px;
  font-size: 9pt;
}
#OSC_Notification a.msgbox {
  background: url('/img/msg.gif') no-repeat 5px 5px;
  padding: 2px 4px 2px 22px;
  text-decoration: none;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
}
#OSC_Notification a.newmsg {
  color: #A00;
  background: url('/img/msg2.gif') no-repeat 5px 3px;
  padding: 2px 4px 2px 22px;
  text-decoration: none;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
}
#OSC_Notification a:hover {
  font-weight: bold;
  color: #C00;
}
#OSC_Notification a em {
  font-style: normal;
  font-weight: bold;
  margin-right: 2px;
  text-decoration: underline;
}
#OSC_Topbar {
  margin: 2px 0;
}
#OSC_Topbar #VisitorInfo {
  font-size: 9pt;
  color: #888;
  float: left;
}
#OSC_Topbar #VisitorInfo a {
  text-decoration: none;
}
#OSC_Topbar #SearchBar form {
  float: right;
  margin: 3px 0 0 0;
  width: 310px;
  background: #eee;
  padding: 1px;
}
#OSC_Topbar #SearchBar form .ipt {
  display: inline-block;
  height: 22px;
  padding: 2px 0 0 5px;
  background: #FFF;
}
#OSC_Topbar #SearchBar form .ipt input {
  color: #868686;
  width: 200px;
  border: none;
  background: #FFF;
  padding: 0;
  height: 20px;
  outline: 0;
}
#OSC_Topbar #SearchBar form .bnt {
  color: #FFF;
  text-align: center;
  background: #5cc26f;
  width: 45px;
  height: 24px;
  border: 0;
  cursor: pointer;
}
#OSC_Topbar #SearchBar form .bnt:hover {
  background: #40ab54;
}
#OSC_Topbar #SearchBar form .search-by {
  float: left;
}
#OSC_Topbar #SearchBar form .search_on {
  background: #FFF;
  text-align: center;
  position: relative;
}
#OSC_Topbar #SearchBar form .search_on .text {
  height: 24px;
  line-height: 23px;
  width: 50px;
  display: block;
  color: #868686;
  cursor: pointer ;
  text-align: left;
  padding: 0px 0 0 10px;
  background: url(/img/android/selectbox_bg.png) no-repeat;
}
#OSC_Topbar #SearchBar form .search_on .text.on {
  background-position: 0 -24px;
}
#OSC_Topbar #SearchBar form .search_on .text.hover {
  background-position: 0 -48px;
}
#OSC_Topbar #SearchBar form .search_list {
  background: #FFF;
  display: none;
  position: absolute;
  width: 80px;
  border: 1px solid #c3c3c3;
  z-index: 9999;
}
#OSC_Topbar #SearchBar form .search_list li {
  width: 80px;
  height: 24px;
  line-height: 24px;
}
#OSC_Topbar #SearchBar form .search_list a {
  display: block;
  color: #333 !important;
  font-size: 8pt !important;
  text-decoration: none;
  padding: 0 0 0 10px;
}
#OSC_Topbar #SearchBar form .search_list a:hover {
  background: #3399ff;
  color: #ffffff !important;
}
#OSC_Topbar #SearchBar form .f_r {
  float: right;
}
#OSC_Topbar #SearchBar form .f_l {
  float: left;
}
#OSC_Topbar #SearchBar form .last {
  margin: 0 !important;
}
#OSC_Topbar #SearchBar form .hide {
  display: none;
}
/* 底部版权 */
#OSC_Footer {
  margin-top: 20px;
  padding-bottom: 50px;
  height: 38px;
  line-height: 38px;
  border-top: 2px solid #cccccc;
  color: #666666;
  text-align: center;
}
#OSC_Content {
  margin: 10px 2px;
  position: relative;
}
#SpaceLeft {
  float: left;
  width: 220px;
}
#SpaceLeft a {
  text-decoration: none;
}
#SpaceMain {
  margin: 0 220px 0 230px;
  word-wrap: break-word;
}
#SpaceRight {
  position: absolute;
  right: 0;
  top: 0;
  width: 210px;
  word-wrap: break-word;
}
.SpaceList {
  margin: 0 0 0 230px;
  border: 1px solid #eee;
  padding: 10px 15px;
  background: #fff;
  word-wrap: break-word;
}
.SpaceList .TopBar {
  margin: 0 0 25px 0;
  color: #999999;
  font-size: 9pt;
  height: 22px;
  line-height: 22px;
}
.SpaceList .TopBar h1 {
  color: #333333;
}
.Owner {
  background: #5cc26f;
  padding: 15px 5px 15px 10px;
  position: relative;
}
.Owner a.Img:hover {
  background: none;
}
.Owner a {
  color: #fff;
  padding: 0px;
}
.Owner a:hover {
  background: #fff;
  color: #5cc26f;
}
.Owner a.ThemeSetting {
  position: absolute;
  right: 0;
  top: 0;
  text-indent: -9999px;
  width: 28px;
  height: 28px;
  background: url('/img/2012/enter_narrow.png') no-repeat 0 0;
}
.Owner a.ThemeSetting:hover {
  background: url('/img/2012/enter_narrow.png') no-repeat 0 -30px;
}
.Owner .Img img {
  float: left;
  width: 56px;
  height: 56px;
  background: #fff;
  padding: 3px;
  margin: 0 8px 10px 0;
}
.Owner .Img:hover img {
  background: #eee;
}
.Owner span.U {
  float: left;
  width: 130px;
}
.Owner span.U .Name {
  color: #FFF;
  font-size: 14pt;
  display: block;
  margin: 0 0 12px 0;
  font-weight: bold;
  word-wrap: break-word;
}
.Owner span.U .Name {
  background: none;
}
.Owner span.U .opts {
  color: #fff;
  font-size: 9pt;
}
.Owner span.U .opts a {
  color: #fff;
}
.Owner span.U .opts a:hover {
  background-color: #fff;
  color: #5cc26f;
}
.Owner a#gender_icon {
  text-indent: -9999px;
  background-color: #5cc26f;
}
.Owner a#gender_icon:hover {
  background-color: #5cc26f;
}
.Owner .stat {
  color: #fff;
  font-size: 9pt;
}
.Owner .stat a {
  margin-right: 3px;
}
.Owner .stat a span {
  font-size: 9pt;
}
.Resume {
  background: #7798cb url('/img/2012/resume24.png') no-repeat left bottom;
  margin: 3px 0 0 0;
  color: #fff;
  padding: 18px 10px 18px 40px;
  word-wrap: break-word;
  overflow: hidden;
}
.Resume textarea {
  width: 170px;
  height: 60px;
  font-size: 9pt;
}
/*勋章*/
.Medals {
  background-color: #5cc26f;
  margin-top: 3px;
  padding: 5px;
}
.Opts {
  margin: 3px 0 0 0;
}
.Opts a {
  cursor: pointer;
  float: left;
  width: 108px;
  height: 108px;
}
.Opts a.a1 {
  background-color: #5cc26f;
}
.Opts a.a1:hover {
  background-color: #40ab54;
}
.Opts a.a2 {
  background-color: #5cc26f;
}
.Opts a.a2:hover {
  background-color: #40ab54;
}
.Opts a span {
  padding: 82px 0 0 10px;
  font-size: 11pt;
  color: #fff;
}
.Opts a i {
  text-indent: -9999px;
  display: block;
  margin: 10px 0 0 20px;
  width: 67px;
  height: 67px;
  background-image: url('/img/2012/space-opts.png');
  background-repeat: no;
}
.Opts a.a2 {
  margin-left: 4px;
}
.Opts a.blog i {
  background-position: 0 -67px;
}
.Opts a.admin i {
  background-position: 0 -201px;
}
.Opts a.sendmsg i {
  background-position: 0 -134px;
}
.Opts a.ask i {
  background-position: 0 0;
}
.Mod {
  background: #EAEAEA;
  margin: 3px 0 0 0;
  padding: 5px 0;
  color: #666666;
  overflow: hidden;
}
.Mod strong {
  display: block;
  font-size: 12pt;
  border-bottom: 2px solid #7798cb;
  padding: 0 10px 5px 10px;
  color: #666666;
}
.Mod strong .more {
  float: right;
  font-weight: normal;
  font-size: 10pt;
  margin: 3px 0 0 0;
}
.Mod ul,
.Mod ol {
  margin: 10px;
  line-height: 24px;
}
.Users ul li {
  float: left;
}
.Users ul li a {
  margin: 1px 1px 0 0;
}
.Users ul li img {
  width: 36px;
  height: 36px;
  border: 1px solid #EAEAEA;
}
.Users ul li a:hover img {
  border: 1px solid #5cc26f;
}
.Users .more {
  margin: 10px 0;
  text-align: right;
  padding: 0 5px 0 0 ;
}
#BlogCatalogs ul li a {
  background: url('/img/fw_arrow.gif') no-repeat left center;
  padding-left: 15px;
  color: #333333;
}
#BlogCatalogs ul li a:hover {
  color: #000;
}
#BlogCatalogs ul li span {
  color: #666666;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
  margin-left: 5px;
}
#BlogCatalogs ul li.draft a {
  font-weight: bold;
}
#HotBlogs ol li a {
  color: #333333;
  display: block;
}
#HotBlogs ol li a:hover {
  color: #000;
  background: #ddd;
}
#BlogLinks li a {
  color: #333333;
  display: block;
}
#BlogLinks li a:hover {
  color: #000;
  background: #ddd;
}
#RelativeBlogs {
  position: fixed;
  bottom: 0;
  right: -400px;
  width: 380px;
  height: 160px;
  background-color: #FFFFFF;
  font-size: 10.5pt;
  border: 1px solid #5cc26f;
}
#RelativeBlogs strong {
  display: block;
  margin: 0 0 10px 0;
  background: #5cc26f;
  color: #fff;
  padding: 2px 5px;
}
#RelativeBlogs strong a#btn_close {
  cursor: pointer;
  float: right;
  color: #fff;
  font-size: 9pt;
}
#RelativeBlogs ul {
  margin: 10px;
}
#RelativeBlogs ul li {
  line-height: 22px;
}
#RelativeBlogs ul li a {
  background: url('/img/a2.gif') no-repeat left center;
  padding-left: 15px;
  font-size: 10pt;
  text-decoration: none;
}
#RelativeBlogs ul li .date {
  float: right;
  font-size: 8pt;
  color: #666666;
  -webkit-text-size-adjust: none;
}
#BlogReplies ul li {
  color: #666666;
  border-bottom: 1px dashed #999999;
}
.TopBar .NavPath {
  float: left;
}
.TopBar .PreviewMod {
  float: right;
}
.TopBar .PreviewMod a.active {
  font-weight: bold;
  color: #4466BB;
}
.TopBar .PreviewMod a {
  color: #666666;
}
.BlogList .Blog {
  margin: 0 0 15px 0;
  border-bottom: 1px solid #eee;
  padding-bottom: 5px;
  position: relative;
}
.BlogList .Blog .date {
  position: absolute;
  right: 0;
  top: 5px;
  background: #7798cb;
  font-size: 8pt;
  color: #fff;
  -webkit-text-size-adjust: none;
  text-align: center;
  padding: 2px 3px;
}
.BlogList .Blog .date em {
  font-style: normal;
  font-family: Calibri;
  font-size: 16pt;
  display: block;
  font-weight: bold;
}
.BlogList .Blog .title {
  margin-right: 80px;
}
.BlogList .Blog h2 {
  font-size: 12pt;
  margin: 0 0 5px 0;
}
.BlogList .Blog h2.BlogAccess_false {
  background: url('/img/lock.gif') no-repeat 3px center;
  padding-left: 20px;
}
.BlogList .Blog h2.BlogTop_1 {
  background: url('/img/top.gif') no-repeat left center;
  padding-left: 22px;
}
.BlogList .Blog h2.BlogSong {
  background: url('/img/song.gif') no-repeat left center;
  padding-left: 22px;
}
.BlogList .Blog h2 a {
  text-decoration: none;
  color: #333333;
}
.BlogList .Blog .outline {
  color: #666666;
  font-size: 9pt;
}
.BlogList .Blog .bottom {
  margin: 15px 0 8px 0;
  color: #666666;
  font-size: 9pt;
}
.BlogList .Blog .bottom a.fullcontent {
  margin-left: 10px;
}
.BlogList .Blog .TextContent {
  margin: 15px 0 0 0px;
  color: #666666;
  line-height: 22px;
  overflow: hidden;
  letter-spacing: 1px;
}
.BlogList .Blog a {
  color: #666666;
}
.BlogList .Blog a:hover {
  color: #333333;
}
.BlogList .Blog .catalog {
  display: inline-block;
  position: relative;
  padding: 0px;
  margin: 0px;
  vertical-align: middle;
}
.BlogList .Blog .catalog ul {
  position: absolute;
  top: 18px;
  left: 27px;
  width: 120px;
  background: #5cc26f;
  z-index: 1000;
  overflow: hidden;
  border: 1px solid #F1F1F1;
  padding: 3px;
  display: none;
  vertical-align: middle;
  color: #FFF;
}
.BlogList .Blog .catalog ul li {
  line-height: 20px;
  text-indent: 5px;
  cursor: pointer;
  vertical-align: middle;
}
.BlogList .Blog .catalog ul li img {
  cursor: pointer;
  vertical-align: middle;
  float: right;
  margin-right: 5px;
  display: none;
}
.BlogList .Blog .catalog ul li:hover img {
  display: block;
}
.BlogList .Blog .setting {
  margin-left: 4px;
  vertical-align: middle;
  cursor: pointer;
  border: 1px solid #FFF;
}
.BlogList .Blog .setting:hover {
  border: 1px solid #F3F3F3;
}
.BlogTitle {
  padding: 5px 70px 5px 0px;
  margin: 0 0 10px 0;
  border-bottom: 2px solid #5cc26f;
  position: relative;
}
.BlogTitle h1 {
  font-size: 22px;
  margin: 0 0 10px 0;
  color: #000;
  font-weight: normal;
}
.BlogTitle .BlogStat {
  color: #666666;
}
.BlogTitle .BlogStat strong {
  margin: 0 2px;
  color: #A00;
}
.BlogTitle .BlogStat a {
  color: #A00;
  text-decoration: none;
}
.BlogTitle .BlogStat a:hover {
  color: #F00;
}
.BlogTitle .BlogStat .admin em {
  font-style: normal;
  font-weight: bold;
  color: #A00;
  margin: 0 2px;
}
.BlogTitle .tvote {
  height: 55px;
  width: 50px;
  display: inline-block;
  position: absolute;
  right: 0px;
  bottom: 5px;
}
.BlogTitle .tvote .num,
.BlogTitle .tvote .vote {
  display: inline-block;
  width: 50px;
  text-align: center;
  font-style: normal;
  color: #FFF;
  background: #5cc26f;
  cursor: pointer;
}
.BlogTitle .tvote .num:hover,
.BlogTitle .tvote .vote:hover {
  background-color: #4dbc62;
}
.BlogTitle .tvote .num {
  height: 20px;
  line-height: 20px;
  font-size: 12px;
}
.BlogTitle .tvote .vote {
  height: 35px;
  line-height: 35px;
  font-size: 20px;
}
.BlogContent {
  font-size: 12.5px;
  overflow: hidden;
}
.BlogContent p {
  margin-bottom: 15pt;
  line-height: 1.5;
  letter-spacing: 1px;
}
.BlogContent pre {
  line-height: 18px;
  margin: 10px 0 10px 20px;
  font-size: 9pt;
  font-family: Courier New,Arial;
  border: 1px solid #ddd;
  border-left: 5px solid #6CE26C;
  background: #f6f6f6;
  padding: 5px;
}
.BlogAnchor {
  background: #f4f7f9;
  padding: 10px;
}
.BlogAnchor p {
  font-size: 12px;
}
.BlogAnchor .AnchorContent {
  padding: 5px 0px;
}
.BlogAnchor li {
  list-style: none;
  padding: 1px 0;
}
.BlogAnchor a {
  text-decoration: none;
}
.BlogAnchor a:hover {
  color: #5cc26f;
}
.BlogAnchor .osc_h1 {
  text-indent: 20px;
  font-size: 14px;
}
.BlogAnchor .osc_h2 {
  text-indent: 35px;
  font-size: 13px;
}
.BlogAnchor .osc_h3 {
  text-indent: 50px;
  font-size: 12px;
}
.BlogAnchor .osc_h4 {
  text-indent: 65px;
  font-size: 11px;
}
.BlogAnchor .osc_h5 {
  text-indent: 80px;
  font-size: 10px;
}
.BlogAnchor .osc_h6 {
  text-indent: 95px;
  font-size: 9px;
}
/*   happysha 2013-07-07   */
.BlogContent {
  color: #333;
  padding: 10px;
}
.BlogAbstracts {
  padding: 10px;
  background: #f4f7f9;
  font-size: 12px;
}
.BlogAbstracts strong {
  font-size: 15px;
  color: #15a230;
  font-weight: normal;
}
.BlogAbstracts span {
  font-size: 12.5px;
  letter-spacing: 0.7px;
}
em.corner {
  font-size: 13px;
  font-weight: normal;
  color: #FFF;
  display: inline-block;
  line-height: 20px;
  background: #5cc26f;
  font-style: normal;
  padding: 1px 8px;
  margin-right: 10px;
}
.BlogAnchor p {
  font-size: 18px;
  color: #15a230;
}
.BlogAnchor p strong {
  font-weight: normal;
  font-size: 14px;
}
.BlogContent,
.BlogAbstracts,
.BlogAnchor {
  line-height: 180%;
}
.BlogContent h1,
.BlogContent h2,
.BlogContent h3,
.BlogContent h4,
.BlogContent h5,
.BlogContent h6,
.BlogContent p,
.BlogContent ol,
.BlogContent ul {
  line-height: 180%;
}
.BlogContent h1,
.BlogContent h2,
.BlogContent h3,
.BlogContent h4,
.BlogContent h5,
.BlogContent h6 {
  font-weight: 600;
}
.BlogContent h1 {
  font-size: 24px;
  margin: 20px 0 10px 0;
}
.BlogContent h2 {
  font-size: 20px;
  margin: 20px 0 10px 0;
}
.BlogContent h3 {
  font-size: 16px;
  margin: 15px 0 10px 0;
}
.BlogContent h4 {
  font-size: 14px;
  margin: 10px 0;
}
.BlogContent h5 {
  font-size: 12px;
  margin: 10px 0;
}
.BlogContent h6 {
  font-size: 12px;
  margin: 10px 0;
}
.BlogContent p {
  font-size: 12.5px;
  margin: 8px 0;
  letter-spacing: 0.5px;
}
.BlogContent ol,
.BlogContent ul {
  margin: 10px 20px;
}
.BlogContent img {
  max-width: 640px;
  padding: 5px;
  background: #f4f7f9;
  border: 1px solid #ddd;
  margin: 10px 0;
}
.BlogContent blockquote:before,
.BlogContent blockquote:after,
.BlogContent q:before,
.BlogContent q:after {
  content: "";
  font-size: 24px;
  color: #0F6575;
  font-family: Helvetica, arial, '宋体';
  position: absolute;
}
.BlogContent blockquote:before {
  content: "“";
  top: 5px;
  left: 10px;
}
.BlogContent blockquote:after {
  content: "”";
  bottom: -5px;
  right: 15px;
}
.BlogContent q,
.BlogContent blockquote {
  position: relative;
  background: #F4FDFD;
  text-align: left;
  margin: 20px 10px;
  padding: 3px 25px 3px 25px;
  color: #333;
  font-size: 10pt;
  line-height: 22px;
  border-left: 3px solid #A4DAF0;
}
.BlogContent blockquote i,
.BlogContent q i {
  font-style: normal;
  font-size: 12px;
}
.BlogContent b {
  font-style: normal;
  font-weight: 600;
}
.BlogContent > table {
  border-collapse: collapse;
  border-spacing: 1px;
  border: 1px solid #F8F8F8;
  font-size: 12px;
  color: #444;
}
.BlogContent > table th,
.BlogContent > table td {
  padding: 0 2px;
}
.BlogContent > table th {
  font-weight: 500;
  background: #f3f3f3;
}
.BlogContent > table th,
.BlogContent > table td {
  border: 1px solid #F8F8F8;
  padding: 1px 2px;
}
.BlogContent a {
  color: #FF8373;
  font-size: 12px;
}
.BlogContent ul,
ol {
  margin: 0 0 10px 20px;
}
.BlogContent ul {
  list-style-type: disc;
}
.BlogContent ol {
  list-style-type: decimal;
}
.BlogContent code {
  font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', 'Courier', 'monospace !important';
  margin: 0 2px;
  padding: 1px 3px;
  border: 1px solid #EEE;
  background-color: #FcFcFc;
  border-radius: 3px;
  word-break: break-all;
  color: #40AA53;
}
.BlogContent pre > code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}
.BlogContent pre code {
  background-color: transparent;
  border: none;
}
.BlogContent .syntaxhighlighter .number code {
  color: #afafaf !important;
}
.BlogShare {
  padding: 8px 0px;
  border: 1px solid #DDD;
  margin: 20px 0px;
  line-height: 30px;
}
.BlogShare a {
  text-decoration: none;
}
.BlogShare strong {
  margin-left: 15px;
  line-height: 30px;
  vertical-align: middle;
}
.BlogShare .share_sina img,
.BlogShare .share_qq img {
  vertical-align: middle;
  margin: 3px 8px;
}
.BlogShare .BlogVote {
  height: 30px;
  background: #5cc26f;
  display: inline-block;
  float: right;
  padding: 3px 8px;
  line-height: 30px;
  color: #FFF;
  margin-right: 5px;
}
.BlogShare .BlogVote:hover {
  background-color: #4dbc62;
}
.BlogShare .BlogVote .num {
  padding: 0px 3px;
  cursor: pointer;
  font-size: 12px;
}
.BlogShare .BlogVote .vote {
  padding: 0px 3px;
  font-size: 18px;
  cursor: pointer;
}
/*   happysha 2013-07-07   */
.BlogLinks {
  margin: 10px 0 20px 0;
}
.BlogLinks ul {
  list-style-type: none;
  font-weight: bold;
  height: 24px;
}
.BlogLinks ul li.prev {
  float: left;
  width: 48%;
}
.BlogLinks ul li.next {
  float: right;
  width: 48%;
  text-align: right;
}
.BlogCopyright {
  color: #666666;
  margin: 20px 0;
  border: 1px solid #ddd;
  background: #ffe;
  padding: 5px 15px;
  font-size: 12px;
}
.BlogCopyright a {
  color: #666666;
  text-decoration: none;
}
.BlogComments h2 {
  font-size: 18px;
  color: #444;
  font-weight: 600;
  padding: 5px 0px;
  border-bottom: 1px solid #ccc;
}
.BlogComments h2 em {
  font-size: 12px;
  padding: 0px 5px;
  font-style: normal;
  color: #5cc26f;
}
.BlogComments h2 a {
  float: right;
  font-weight: normal;
  font-size: 10pt;
}
.BlogComments ul {
  margin: 10px 0 10px 0;
}
.BlogComments ul li {
  margin: 0 0 10px 0;
  padding: 5px 0px;
}
.BlogComments ul li.even {
  background: #F6F6F6;
}
.BlogComments ul li .portrait {
  width: 65px;
  padding-top: 3px;
}
.BlogComments ul li .portrait img {
  width: 40px;
  height: 40px;
  padding: 2px;
  background: #fff;
  border: 1px solid #F1F1F1;
}
.BlogComments ul li .body .title {
  color: #666666;
  font-size: 9pt;
}
.BlogComments ul li .body .title a.user {
  text-decoration: none;
  color: #666666;
  font-weight: bold;
}
.BlogComments ul li .body .post {
  margin: 8px 0 0 0;
  color: #00A;
  font-size: 12px;
}
.BlogComments ul li .body .post div.ref {
  border: 1px solid #999;
  color: #333;
  margin: 0 0 10px 0;
  padding: 3px;
  background: #ffe;
  font-size: 9pt;
}
.BlogComments ul li .body .post div.ref h4 {
  margin: 0;
  padding: 2px 0px 3px 0px;
  color: #1E50A2;
  font-weight: normal;
  font-size: 10pt;
}
.BlogComments ul li .body .post div.ref p {
  margin: 0;
  padding: 2px;
  line-height: 20px;
  color: color: #333;
  font-size: 9pt;
}
.BlogComments ul li .body .post img {
  width: 20px;
  vertical-align: middle;
  margin: 0px 2px;
}
.BlogComments .inline_reply {
  margin-top: 10px;
}
.BlogCommentForm {
  width: 650px;
}
.BlogCommentForm .comment_form {
  padding-left: 70px;
  width: 650px;
}
.blg_submit_btn {
  padding: 5px 10px;
  text-decoration: none;
  background: #5cc26f;
  font-size: 12px;
  color: #FFF;
  display: inline-block;
  border: none;
  font-family: '微软雅黑';
  cursor: pointer;
}
.blg_submit_btn:hover {
  background-color: #4dbc62;
}
.BlogCommentForm .comment_portrait {
  float: left;
  margin-left: 10px;
}
.BlogCommentForm .comment_portrait img {
  width: 40px;
  height: 40px;
  padding: 2px;
  border: #eee 1px solid;
}
.BlogCommentForm p {
  margin: 5px 0px;
  font-size: 12px;
}
.BlogCommentForm a.blog_emotion,
.BlogCommentForm a.blog_soft {
  text-decoration: none;
  padding: 1px 2px 1px 18px;
  color: #666;
  border: 1px #FFF solid;
}
.BlogCommentForm a.blog_emotion:hover,
.BlogCommentForm a.blog_soft:hover {
  border: 1px #F00 solid;
}
.BlogCommentForm a.blog_emotion {
  background: url('/img/space/emotion.gif') no-repeat left center;
}
.BlogCommentForm a.blog_soft {
  background: url('/img/space/app.gif') no-repeat left center;
}
.LMod {
  border: 1px solid #eee;
  background: #fff;
  padding: 10px 10px 5px 10px;
  overflow: hidden;
}
.LMod strong {
  display: block;
  font-size: 12pt;
  padding: 0 10px;
  color: #666666;
}
.LMod ul {
  margin: 15px 0 0 0;
}
.LMod ul li {
  margin: 0 0 10px 0;
}
.LMod ul li .d {
  color: #999999;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
  margin-left: 5px;
}
.LMod ul li a {
  background: url('/img/a2.gif') no-repeat left 6px;
  padding-left: 15px;
  text-decoration: none;
}
.LMod .more {
  margin: 10px 0;
  text-align: right;
  padding: 0 5px 0 0 ;
}
.MMod {
  border: 1px solid #eee;
  background: #fff;
}
.RMod {
  border: 1px solid #eee;
  background: #fff;
  padding: 10px;
}
.RMod strong {
  color: #333333;
  display: block;
  font-size: 14pt;
  font-weight: normal;
  margin: 0 0 10px 0;
}
.RMod strong a {
  float: right;
  font-weight: normal;
  font-size: 10pt;
  margin: 5px 2px 0 0;
}
.RMod ul li a {
  color: #333333;
  text-decoration: none;
}
.RMod ul li a:hover {
  color: #000;
}
#Ad {
  margin: 20px 0 0 0;
}
#Ad strong {
  display: block;
  margin: 0 0 10px 0;
}
#AboutMe {
  padding: 20px;
}
#MyBlog {
  background: #5cc26f;
  padding: 10px;
  margin-bottom: 10px;
}
#MyBlog a {
  text-decoration: none;
  color: #fff;
  font-size: 16pt;
  float: left;
  margin-left: 10px;
}
#MyBlog .action {
  float: left;
  width: 30px;
  height: 30px;
  background: url('/img/2012/action-icons.png') no-repeat 0 0;
}
#MyBlog:hover {
  background: #40ab54;
}
#TopBlogs {
  margin: 10px 0 0 0;
  padding-bottom: 10px;
}
#TopBlogs strong {
  padding-left: 5px;
  padding-right: 0;
}
#TopBlogs strong a {
  font-weight: normal;
  float: right;
  text-decoration: none;
  color: #000;
}
#TopBlogs ul li {
  margin: 0 5px 3px 0;
}
#TopBlogs ul li .s {
  font-size: 9pt;
  color: #999;
  margin-left: 5px;
}
#TopBlogs ul li .d {
  float: right;
  font-size: 9pt;
}
#TopBlogs ul li a {
  background: none;
  padding-left: 10px;
}
#UserSkills #UserScore {
  border-bottom: 1px dashed #eee;
  overflow: hidden;
  padding-bottom: 10px;
}
#UserSkills #UserScore h1 {
  font-size: 12pt;
  font-weight: normal;
  float: left;
  text-align: center;
}
#UserSkills #UserScore h1 em {
  font-size: 20pt;
  color: red;
  font-style: normal;
  color: #F00;
  display: block;
  margin: 5px 0 0 0;
}
#UserSkills #UserScore h1 a {
  color: #999;
  text-decoration: none;
  display: block;
}
#UserSkills #UserScore h1 a:hover {
  color: #000;
}
#UserSkills #UserScore h1.best {
  width: 80px;
}
#UserSkills #UserScore h1.score {
  width: 90px;
  border-left: 1px solid #eee;
  padding-left: 10px;
}
#UserSkills h1.Title {
  color: #5cc26f;
  font-size: 16pt;
}
#UserSkills h1.Title a {
  font-weight: normal;
  font-size: 10pt;
  float: right;
  margin: 3px 2px 0 0;
}
#UserSkills ul li {
  margin: 10px 0 0 0;
}
#UserSkills ul li strong {
  font-size: 10.5pt;
  margin: 0px;
  font-weight: bold;
}
#UserSkills ul li p {
  color: #666;
}
#UserSkills ul li .more {
  display: block;
}
#UserSkills #OtherScore {
  border-bottom: 1px dashed #eee;
  padding: 5px 0 5px 20px;
  overflow: hidden;
}
#UserSkills #OtherScore h1 {
  font-size: 10pt;
  font-weight: normal;
  float: left;
}
#UserSkills #OtherScore h1 em {
  font-size: 10pt;
  color: red;
  font-style: normal;
  color: #F00;
  margin: 0 15px 0 0px;
  float: right;
  width: 50px;
  text-align: right;
}
#UserSkills #OtherScore h1 a {
  color: #999;
  text-decoration: none;
  display: block;
  text-align: left;
  width: 140px;
}
#UserSkills #OtherScore h1 a:hover {
  color: #000;
}
#Profile li {
  margin: 10px 0 0 0;
  font-size: 9pt;
  color: #666666;
}
#Profile li b {
  display: block;
  color: #333333;
  margin-bottom: 2px;
}
#Profile li b.inline {
  display: inline;
}
#Profile li a {
  color: #4466bb;
}
#Profile li a:hover {
  color: #0000aa;
}
#FavorBox {
  margin-top: 10px;
  padding-bottom: 20px;
}
#FavorBox ul {
  margin: 0 0 0 0;
}
#FavorBox ul li {
  float: left;
  width: 85px;
  height: 62px;
  text-align: center;
  margin: 30px 0 0 5px;
  overflow: hidden;
}
#FavorBox ul li .logo {
  display: block;
  margin: 0 0 3px 0;
}
#FavorBox ul li img {
  width: 40px;
  height: 40px;
}
#FavorBox ul li .name {
  font-weight: bold;
  font-size: 9pt;
  height: 20px;
  line-height: 20px;
}
#FavorUpdate {
  margin-top: 10px;
}
#FavorUpdate ul {
  margin: 20px 0 0 0;
}
#FavorUpdate ul li {
  margin: 0 0 10px 0;
  color: #999999;
  font-size: 9pt;
}
#FavorUpdate ul li a {
  font-weight: bold;
  font-size: 9pt;
  display: block;
  margin-bottom: 2px;
}
#FavorUpdate ul li .date {
  font-size: 8pt;
  -webkit-text-size-adjust: none;
}
.AdminNav {
  background: #5cc26f;
  padding: 10px;
  font-size: 14pt;
}
.AdminNav a.u {
  float: left;
  width: 40px;
}
.AdminNav a.u img {
  width: 36px;
  height: 36px;
}
.AdminNav a.h {
  float: left;
  color: #fff;
  margin: 5px 0 0 10px;
}
.AdminNav a.h:hover {
  color: #eee;
}
#AdminMenus {
  font-size: 10.5pt;
}
#AdminMenus li.caption {
  margin-bottom: 20px;
}
#AdminMenus li.caption ol {
  margin: 10px 0 0 0;
  line-height: 26px;
}
#AdminMenus li.caption ol li {
  padding-left: 10px;
}
#AdminMenus li.caption ol li.active {
  background: #f6f6f6;
  font-weight: bold;
}
#AdminMenus li.caption ol li.active a {
  color: #333333;
}
#AdminBody {
  min-height: 600px;
  color: #333333;
}
#AdminBody .AdminHead {
  border-bottom: 1px solid #cccccc;
  margin-bottom: 20px;
}
#AdminBody .AdminHead h1 {
  color: #666666;
  margin-bottom: 15px;
}
#AdminBody .AdminHead h1 a {
  text-decoration: none;
  color: #666666;
}
#AdminBody .AdminHead h1 .SubTitle {
  font-weight: normal;
  font-size: 10.5pt;
  margin-left: 10px;
}
#AdminBody .AdminHead h1 .SubTitle a {
  color: #666666;
}
#AdminBody .AdminHead h1 .SubTitle a:hover {
  color: #000;
  text-decoration: underline;
}
#AdminBody .AdminHead .RelativeLinks {
  float: right;
  margin: 10px 10px 0 0;
}
#AdminBody .AdminHead .RelativeLinks a {
  margin-left: 10px;
}
#AdminBody .AdminHead .Tabs {
  font-size: 16pt;
  padding-left: 20px;
  height: 37px;
  height: 37px;
}
#AdminBody .AdminHead .Tabs li {
  float: left;
  margin-right: 10px;
}
#AdminBody .AdminHead .Tabs li a {
  display: block;
  padding: 5px 10px;
  color: #666666;
  text-decoration: none;
}
#AdminBody .AdminHead .Tabs li a:hover {
  color: #000;
}
#AdminBody .AdminHead .Tabs li a.active {
  background: #7798cb;
  color: #fff;
}
#AdminBody .AdminHead .Tabs li a.active:hover {
  color: #fff;
}
#ProfileForms .Langs strong {
  display: block;
}
#ProfileForms .Langs ul li {
  float: left;
  width: 160px;
  height: 25px;
}
#ProfileForms .Fields ul li {
  float: left;
  width: 220px;
  height: 25px;
}
.Drafts ul li {
  margin: 0 0 20px 0;
  border-bottom: 1px dashed #cccccc;
  padding-bottom: 10px;
}
.Drafts ul li h2 {
  color: #999999;
}
.Drafts ul li h2 a.title {
  font-size: 12pt;
  color: #333333;
  text-decoration: none;
}
.Drafts ul li h2 .opts {
  float: right;
  font-weight: normal;
  font-size: 10pt;
}
.Drafts ul li p {
  color: #999999;
  margin: 10px 10px 0 10px;
  line-height: 24px;
}
.BlogCommentList li {
  margin: 0 0 10px 0;
  border-bottom: 1px dashed #666666;
  padding-bottom: 10px;
}
.BlogCommentList li .user {
  width: 50px;
}
.BlogCommentList li .user img {
  width: 36px;
  height: 36px;
}
.BlogCommentList li .body {
  overflow: hidden;
}
.BlogCommentList li .body a {
  font-weight: bold;
}
.BlogCommentList li .body p {
  color: #666666;
  margin: 5px 0 0 0;
  line-height: 22px;
}
.BlogCommentList li .opts {
  width: 100px;
}
.BlogCommentList li .opts a {
  display: block;
  text-decoration: none;
}
.BlogCatalogManage form {
  margin: 20px 0 0 0;
}
.BlogCatalogManage form h3 {
  font-size: 10.5pt;
  margin: 0 0 10px 0;
}
.BlogCatalogManage form h3 span {
  font-weight: normal;
  margin: 0 0 0 10px;
  color: #666666;
}
.BlogCatalogManage form.BlogCatalogs table {
  background: #cccccc;
}
.BlogCatalogManage form.BlogCatalogs table th {
  background: #999999;
  color: #333333;
  padding: 3px 10px;
  text-align: center;
  font-weight: bold;
}
.BlogCatalogManage form.BlogCatalogs table td {
  background: #fff;
  padding: 3px 5px;
}
.BlogCatalogManage form.BlogCatalogs table td a {
  text-decoration: none;
}
.BlogCatalogManage form.BlogCatalogs table td.idx,
.BlogCatalogManage form.BlogCatalogs table td.num {
  text-align: center;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
}
.BlogLinkManage form {
  margin: 20px 0 0 0;
}
.BlogLinkManage form h3 {
  font-size: 10.5pt;
  margin: 0 0 10px 0;
}
.BlogLinkManage form h3 span {
  font-weight: normal;
  margin: 0 0 0 10px;
  color: #666666;
}
.BlogLinkManage form li {
  list-style: none;
  margin-bottom: 10px;
}
.BlogLinkManage form li label {
  float: left;
  width: 80px;
  text-align: right;
}
.BlogLinkManage form .submit input.BUTTON {
  background: #5cc26f;
  border: none;
  color: #FFF;
  font-weight: normal;
  font-size: 11pt;
  cursor: pointer;
  padding: 2px 8px;
  margin-right: 5px;
}
.BlogLinkManage form .submit input.BUTTON:hover {
  background: #40ab54;
}
.BlogLinkManage form.BlogLinks table {
  background: #cccccc;
}
.BlogLinkManage form.BlogLinks table th {
  background: #5cc26f;
  color: #FFF;
  padding: 3px 10px;
  text-align: center;
  font-weight: bold;
}
.BlogLinkManage form.BlogLinks table td {
  background: #fff;
  padding: 3px 5px;
}
.BlogLinkManage form.BlogLinks table td a {
  text-decoration: none;
}
.BlogLinkManage form.BlogLinks table td.idx,
.BlogLinkManage form.BlogLinks table td.num {
  text-align: center;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
}
#Logs {
  margin: 10px 0 0 0;
  padding: 10px;
}
#Logs .UserLogs {
  margin: 20px 10px;
}
ul.LogTabs {
  border-bottom: 1px solid #7798cb;
  padding-left: 10px;
  height: 28px;
  line-height: 28px;
}
ul.LogTabs li {
  float: left;
  margin-right: 5px;
}
ul.LogTabs li a {
  display: block;
  background: #f6f6f6;
  text-decoration: none;
  font-size: 10.5pt;
  padding: 0 10px;
  color: #999999;
}
ul.LogTabs li a:hover {
  color: #666666;
}
ul.LogTabs li.active a {
  background: #7798cb;
  color: #fff;
}
ul.LogFilter {
  padding: 0 0 0 10px;
  margin-top: 10px;
  height: 20px;
  line-height: 20px;
}
ul.LogFilter li {
  float: left;
  margin-right: 15px;
}
ul.LogFilter li a {
  text-decoration: none;
  display: block;
  padding: 0 5px;
}
ul.LogFilter li a.active {
  border: 1px solid #7798cb;
}
#do_batch_btn {
  text-decoration: none;
}
#FavoriteList {
  padding-right: 30px;
}
#FavoriteTags {
  width: 170px;
}
#FavoriteTags strong {
  display: block;
  margin: 0 0 20px 0;
}
#FavoriteList ul.FavList {
  margin: 20px 0 20px 10px;
}
#FavoriteList ul.FavList li {
  padding: 10px 0;
  border-bottom: 1px dashed #FFF;
}
#FavoriteList ul.FavList li.even {
  background-color: #FFF;
}
#FavoriteList ul.FavList li .opts {
  float: right;
  font-size: 9pt;
}
#FavoriteList ul.FavList li .opts a {
  color: #666666;
}
#FavoriteList ul.FavList li .opts a:hover {
  color: #000;
}
#FavoriteList ul.FavList li a.title {
  text-decoration: none;
  font-size: 10.5pt;
  padding-left: 25px;
}
a.tag.success {
  background-color: #5cc26f;
}
#FavoriteList ul.FavList li .tags {
  margin-left: 25px;
}
#FavoriteList ul.FavList li .tags a {
  padding: 1px 3px;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
}
#FavoriteList ul.FavList li .tags input[type='text'] {
  padding: 0 3px;
}
#FavoriteList ul.FavList li .tags input[type='checkbox'] {
  float: right;
  display: none;
}
#FavoriteList ul.FavList li .tags form {
  margin-top: 5px;
  color: #666666;
}
#FavoriteTags .tag span.count {
  margin-left: 3px;
}
#FavoriteTags .tag:hover span.count {
  display: none;
}
#FavoriteTags .tag span.delete {
  color: #A00;
  margin-left: 3px;
  display: none;
}
#FavoriteTags .tag:hover span.delete {
  display: inline;
  margin-left: 3px;
}
ul#TagSetting {
  margin-top: 20px;
}
ul#TagSetting li input {
  display: none;
  height: 18px;
  line-height: 20px;
}
ul#TagSetting li {
  height: 20px;
  float: left;
  width: 32%;
  padding: 2px;
  margin: 3px 5px;
}
ul#TagSetting li span.tagname {
  margin-right: 5px;
  padding: 0 5px;
  height: 20px;
}
ul#TagSetting li:hover {
  background-color: #CCC;
}
ul#TagSetting li:hover a {
  display: inline;
}
ul#TagSetting li a {
  text-decoration: none;
  float: right;
  font-size: 12px;
  display: none;
}
ul#TagSetting li a.remove {
  margin: 0 10px;
}
ul#TagSetting li img {
  vertical-align: middle;
}
.NewsList {
  margin: 0 0 20px 0;
}
.NewsList li {
  margin-bottom: 5px;
}
.NewsList li .title a {
  text-decoration: none;
}
.NewsList li .stat {
  width: 110px;
  font-size: 9pt;
  color: #666666;
}
.NewsList li .date {
  width: 70px;
  color: #666666;
  font-size: 9pt;
}
.NewsList li .opts {
  width: 110px;
  text-align: right;
  color: #666666;
}
.ProjectList li {
  margin: 0 0 10px 0;
}
.ProjectList .head {
  font-weight: bold;
  color: #000;
  border-bottom: 1px solid #cccccc;
  padding-bottom: 10px;
}
.ProjectList li .date {
  width: 150px;
  color: #666666;
  font-size: 9pt;
}
.ProjectList li .status {
  width: 100px;
}
.ProjectList li .opts {
  width: 80px;
  text-align: right;
}
.UserList h1 {
  border-bottom: 1px solid #cccccc;
  margin: 0 0 10px 0;
  padding-bottom: 15px;
  color: #666666;
}
.UserList h1 .SubTitle {
  font-size: 10pt;
  font-weight: normal;
  color: #666666;
  margin-left: 10px;
}
.UserList .SortBar {
  background: #eee;
  margin-bottom: 20px;
  padding: 3px 10px;
}
.UserList .SortBar a {
  margin-left: 10px;
}
.UserList .SortBar a.active {
  font-weight: bold;
}
.UserList a {
  text-decoration: none;
}
.UserList li {
  margin: 0 0 10px 0;
  border-bottom: 1px dashed #cccccc;
  padding-bottom: 10px;
}
.UserList li td {
  vertical-align: top;
  padding: 0;
}
.UserList li .avatar {
  width: 45px;
}
.UserList li .avatar img {
  width: 32px;
  height: 32px;
  margin-top: 5px;
}
.UserList li .update .name {
  font-weight: bold;
}
.UserList li .update .nickname {
  margin-left: 10px;
  color: #666666;
}
.UserList li .update .set_memo {
  display: none;
}
.UserList li .update .log {
  color: #666666;
  margin: 5px 0 0 0;
  font-size: 9pt;
}
.UserList li .update .log .user {
  display: none;
}
.UserList li .update .log .rpost {
  margin-left: 10px;
}
.UserList li .opts {
  text-align: right;
  width: 80px;
}
.UserList li .opts a {
  display: block;
}
.Msgs a {
  text-decoration: none;
}
.Msgs li {
  margin: 0 0 10px 0;
  border-bottom: 1px dashed #cccccc;
}
.Msgs li .user {
  width: 48px;
}
.Msgs li .user img {
  width: 32px;
  height: 32px;
  margin-top: 5px;
}
.Msgs li .msg {
  color: #333333;
  margin-bottom: 10px;
  line-height: 22px;
}
.Msgs li .bottom {
  height: 20px;
}
.Msgs li .date {
  float: left;
  width: 120px;
  font-size: 9pt;
  color: #666666;
}
.Msgs li .opts {
  float: right;
  text-align: right;
  color: #999999;
}
.MsgForm {
  margin: 0 0 20px 48px;
}
.MsgForm strong {
  display: block;
  margin-bottom: 5px;
}
.MsgForm strong span {
  font-weight: normal;
  margin-left: 10px;
}
.MsgForm textarea {
  width: 500px;
  height: 60px;
  padding: 3px;
}
#MyTweetForm {
  padding: 10px 15px;
  border: 1px solid #eee;
  background: #fff;
}
#TForm #TFormEditor {
  border: 2px solid #5cc26f;
  padding: 2px;
  margin: 2px 0 0 0;
  background: #fff;
}
#TForm textarea {
  border: 0;
  width: 98%;
  height: 50px;
  padding: 5px;
  font-size: 10pt;
  overflow: auto;
  scroll: none;
  background: #fff;
}
#TFormTitle {
  color: #888;
  position: relative;
}
#TFormTitle .r {
  float: right;
  margin: 0px 10px 0 0;
  font-size: 9pt;
}
#TFormTitle .r em {
  font-style: normal;
  font-weight: bold;
  font-size: 10.5pt;
  color: #A00;
  margin: 0 3px 0 0;
}
#TForm #TFormOpts {
  margin: 0 0 0 5px;
}
#TForm #TFormOpts ul {
  float: left;
  margin: 2px 0 0 0;
  padding: 1px;
}
#TForm #TFormOpts ul li {
  display: inline;
  margin-right: 5px;
}
#TForm #TFormOpts ul li a {
  font-size: 9pt;
  text-decoration: none;
  color: #666666;
  border: 1px solid #fff;
  padding: 1px 2px 1px 18px;
}
#TForm #TFormOpts ul li a:hover {
  border: 1px solid #5cc26f;
}
#TForm #TFormOpts ul li.t {
  color: #666666;
  margin-right: 0;
}
#TForm #TFormOpts ul li.emotion a {
  background: url('/img/space/emotion.gif') no-repeat left center;
}
#TForm #TFormOpts ul li.img a {
  background: url('/img/space/img.gif') no-repeat 2px center;
  padding-left: 20px;
}
#TForm #TFormOpts ul li.app a {
  background: url('/img/space/app.gif') no-repeat left center;
}
#TForm #TFormOpts ul li.code a {
  background: url('/img/code.gif') no-repeat left center;
}
#TForm #TFormOpts input.B {
  cursor: pointer;
  border: 0;
  float: right;
  font-size: 12pt;
  padding: 3px 20px 5px 20px;
  margin-right: 10px;
  color: #fff;
  background: #5cc26f;
}
#TweetFormPopupWraper {
  display: none;
  position: absolute;
  z-index: 9999;
}
#TweetFormPopupArrow {
  background-image: url('/img/space/up_arrow.gif');
  background-repeat: no-repeat;
  padding-top: 5px;
}
#TweetFormPopupWraper .emotions {
  background-position: 51px 0px;
}
#TweetFormPopupWraper .images {
  background-position: 107px 0px;
}
#TweetFormPopupWraper .code {
  background-position: 165px 0px;
}
#TweetFormPopup {
  width: 392px;
  border: 2px solid #cccccc;
  background: #ffc;
  padding: 5px;
}
#TweetFormPopup a.close {
  float: right;
  font-size: 8pt;
  font-weight: bold;
  -webkit-text-size-adjust: none;
}
#TweetFormPopup a.emotion {
  float: left;
  width: 24px;
  height: 24px;
  background-image: url('/js/ke/plugins/emoticons/qq.gif');
  background-repeat: no-repeat;
  margin: 0 2px 4px 0;
  border: 1px solid #f6f6f6;
}
#TweetFormPopup a.emotion:hover {
  border: 1px solid #5cc26f;
}
#TweetFormPopup .TweetPopupTitle {
  background: #666666;
  color: #fff;
  padding: 3px 5px;
  margin: 0 0 10px 0;
  font-weight: bold;
}
#TweetFormPopup .TweetPopupTitle a {
  float: right;
  color: #FFF;
}
#TweetImages .l {
  margin: 0 0 10px 0;
}
#TweetImages .tip {
  color: #666666;
}
#TweetCode {
  padding: 5px;
}
#TweetCode textarea {
  width: 100%;
  height: 250px;
  display: block;
  margin: 10px 0;
}
#TweetCode pre {
  font-size: 9pt;
  font-family: Courier New,Arial;
  border: 1px solid #ddd;
  border-left: 5px solid #6CE26C;
  background: #f6f6f6;
  padding: 5px;
  margin: 0 0 10px 0;
}
.Tweet {
  border-bottom: 1px dashed #cccccc;
  padding: 0 0 5px 0;
  margin: 0 0 10px 0;
}
.Tweet a {
  text-decoration: none;
}
.Tweet .TweetUser {
  width: 48px;
}
.Tweet .TweetUser img {
  width: 32px;
  height: 32px;
  margin-top: 5px;
}
.Tweet .TweetContent {
  color: #333333;
}
.Tweet .TweetContent h5 {
  font-weight: normal;
  font-size: 10pt;
  color: #999999;
}
.Tweet .TweetContent .post {
  font-size: 10.5pt;
  line-height: 22px;
  margin: 5px 0 0 0;
  overflow: hidden;
}
.Tweet .TweetContent .ref {
  font-size: 9pt;
  margin: 3px 0 0 0;
  background: url('/img/space/up_arrow.gif') no-repeat 15px 0;
  padding-top: 5px;
}
.Tweet .TweetContent .ref .p {
  border: 1px solid #cccccc;
  background: #f6f6f6;
  padding: 5px;
  color: #999999;
}
.Tweet .TweetContent .ref .rpost {
  display: block;
  margin: 3px 0;
}
.Tweet .TweetContent .photo {
  margin: 10px 0;
}
.Tweet .TweetContent .photo a[class^="rotate-"] {
  width: 14px;
  height: 14px;
  display: inline-block;
}
.Tweet .TweetContent .photo .rotate-clockwise {
  background: url("/img/rotate-clockwise.png") no-repeat;
  background-size: 14px 14px;
}
.Tweet .TweetContent .photo .rotate-anticlockwise {
  background: url("/img/rotate-anticlockwise.png") no-repeat;
  background-size: 14px 14px;
}
.Tweet .TweetContent .photo img {
  border: 1px solid #f6f6f6;
  padding: 1px;
  max-width: 450px;
  cursor: pointer;
}
.Tweet .TweetContent .photo img:hover {
  border: 1px solid #5cc26f;
}
.Tweet .TweetContent .photo .ImgMenu a {
  margin: 0 5px 0 0;
}
.Tweet .TweetContent embed {
  margin: 3px 0 0 0;
}
.Tweet .TweetContent .video {
  margin: 10px 0;
}
.tweet_video_operation {
  display: none;
}
.tweet_video_description {
  margin: 0 0 5px 0;
  font-size: 12px;
}
.tweet_thumb_wrapper {
  display: inline-block;
  border: 1px solid #D2D2D2;
  background: white;
  overflow: hidden;
  padding: 3px;
  position: relative;
  cursor: pointer;
}
.tweet_play_video {
  opacity: 0.7;
  display: inline-block;
  width: 37px;
  height: 37px;
  background: url('/img/play_video.png') no-repeat;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -18px;
  margin-left: -18px;
}
.Tweet .TweetContent pre {
  margin: 5px 0 10px 0;
}
.Tweet .TweetContent .bottom {
  margin: 10px 0 0 0;
  height: 18px;
}
.Tweet .TweetContent .opts {
  font-size: 8pt;
  float: right;
}
.Tweet .TweetContent .time {
  font-size: x-small;
  margin: 0;
  color: #888;
  -webkit-text-size-adjust: none;
}
.Tweet .LogReplyList {
  margin: 0px 0 5px 0;
  display: none;
  padding: 5px 5px 5px 0;
}
.Tweet .LogReplyList .TweetRplsWrapper {
  background: #f9f9f9;
  padding: 10px 10px 20px 10px;
  border: 1px solid #cccccc;
}
.Tweet .LogReplyList .TweetRplsWrapper .loading {
  background: url('/img/loading.gif') no-repeat left center;
  padding-left: 22px;
}
.Tweet .LogReplyList #closeTweetRpls {
  float: right;
  font-weight: bold;
  line-height: 8px;
  height: 8px;
}
.Tweet .LogReplyList form {
  margin: 5px 0 0 5px;
}
.Tweet .LogReplyList form label {
  font-size: 9pt;
}
.Tweet .LogReplyList .TweetReplyOptions {
  margin: 3px 0 0 0;
}
.Tweet .LogReplyList .TweetReplyOptions input {
  float: left;
  margin: 2px 0 0 0;
}
.Tweet .LogReplyList .TweetReplyOptions label {
  float: left;
}
.Tweet .pager {
  margin: 20px 0 0 2px;
}
.TweetRpls h6 {
  font-size: 10pt;
  margin: 10px 0 5px 0;
  border-bottom: 1px solid #cccccc;
  padding-bottom: 5px;
}
.TweetRpls ul {
  font-size: 9pt;
}
.TweetRpls li {
  border-bottom: 1px dashed #cccccc;
  padding: 10px 0 5px 0;
}
.TweetRpls li .portrait {
  width: 30px;
}
.TweetRpls li .portrait img {
  width: 24px;
  height: 24px;
  margin: 5px 0 0 0;
}
.TweetRpls li .TweetReplyBody {
  overflow: hidden;
}
.TweetRpls li .TweetReplyBody .post {
  line-height: 20px;
}
.TweetRpls li .TweetReplyBody .opts {
  float: none;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
  color: #999999;
  margin: 10px 0 0 0;
  height: 18px;
}
.TweetRpls li .TweetReplyBody .opts .links {
  float: right;
}
.TweetRpls li .TweetReplyBody .opts a {
  font-size: 9pt;
}
.TweetRpls .all {
  display: block;
  margin: 10px 0 0 0 ;
}
#TweetReplyPage {
  padding-right: 50px;
}
#TweetReplyPage h1 {
  font-size: 16pt;
  margin-bottom: 20px;
}
#TweetReplyPage h1 a {
  text-decoration: none;
}
#TweetReplyPage .TweetContent .bottom {
  width: 540px;
}
#TweetReplyForm {
  margin: 0 0 20px 0px;
  width: 600px;
}
#TweetReplyForm textarea {
  display: block;
  width: 98%;
  height: 40px;
  font-size: 9pt;
  padding: 2px;
  margin: 10px 0 5px 0;
}
#TweetReplyForm .TweetReplyOptions {
  float: right;
}
#TweetReplyForm #btn_submit {
  padding: 2px 3px;
  font-weight: bold;
  margin-right: 5px;
}
#TweetReplyPage #TweetReplies {
  width: 600px;
}
#TweetReplyPage #TweetReplies li .TweetReplyBody {
  width: 550px;
}
.gotop {
  background: url(/img/gotop.gif) no-repeat;
  display: block;
  width: 31px;
  height: 31px;
}
#SpaceHomeLayoutSelector {
  height: 350px;
}
#SpaceHomeLayoutSelector a {
  float: left;
  width: 48%;
  text-align: center;
}
#SpaceHomeLayoutSelector a em {
  display: block;
  font-style: normal;
  font-weight: bold;
  margin: 0 0 10px 0;
}
#SpaceHomeLayoutSelector a img {
  border: 3px solid #fff;
  padding: 5px;
}
#SpaceHomeLayoutSelector a.active img {
  border: 3px solid #7798CB;
}
#LayoutSelectorMsg {
  text-align: center;
  font-size: 14pt;
  margin: 20px 0 0 0;
  color: #000;
  display: none;
}
/* 通用的表单 */
.error_msg {
  height: 22px;
  color: #A00;
  margin: 10px 0 10px 0;
  background: url('/img/warning.gif') no-repeat left center;
  padding-left: 24px;
}
.error_msg a {
  padding: 0 5px 0 5px;
  font-weight: bold;
}
.ok_msg {
  height: 22px;
  color: #060;
  margin: 10px 0 10px 0;
  background: url('/img/space/tick.png') no-repeat left center;
  padding-left: 24px;
}
.ok_msg a {
  padding: 0 5px 0 5px;
  font-weight: bold;
}
.MainForm {
  font-size: 10.5pt;
}
.MainForm .Tip {
  margin: 0 0 10px 0;
  border: 1px solid #cccccc;
  background: #ffc;
  font-size: 9pt;
  padding: 10px;
  color: #00A;
}
.MainForm .Tip ul {
  margin: 10px 0 0 10px;
  line-height: 22px;
  list-style-type: disc;
  list-style-position: inside;
}
.MainForm form th {
  text-align: right;
  padding: 10px;
  font-weight: normal;
  color: #666666;
}
.MainForm form th.required {
  font-weight: bold;
}
.MainForm form td.t {
  color: #333333;
}
.MainForm form td .tip {
  color: #5cc26f;
  font-size: 9pt;
}
.MainForm form input.TEXT {
  padding: 3px;
}
.MainForm form select {
  padding: 3px;
}
.MainForm form textarea {
  padding: 3px;
  font-size: 12pt;
}
.MainForm form textarea#txt_abstracts {
  width: 600px;
  height: 80px;
  font-size: 10.5pt;
}
.MainForm form input.BUTTON {
  font-size: 12pt;
  padding: 2px 5px;
}
.MainForm form input.SUBMIT {
  font-weight: bold;
  padding: 2px 10px;
}
.MainForm form .submit #error_msg {
  margin-left: 10px;
}
.MainForm .FormSection {
  margin: 20px 0;
}
.MainForm .FormSection ul {
  margin: 20px 0 0 20px;
}
.MainForm .Btn_Save {
  margin: 20px 0;
}
.MainForm .btn_save {
  background: #5cc26f;
  color: #fff;
  text-decoration: none;
  height: 30px;
  margin-right: 10px;
  border: 0px solid #000;
  font-weight: bold;
  cursor: pointer;
  padding: 5px 10px;
}
.MainForm .btn_save:hover {
  background: #40ab54;
}
.MainForm .btn_save:hover span {
  background: #40ab54;
  color: #fff;
}
.write-blog .section {
  margin: 10px 0px;
  padding: 5px 0px;
  font-size: 12.5px;
}
.write-blog .b-input {
  background-color: #fff;
  border: 1px solid #D9D9D9;
  border-top-color: #C0C0C0;
  border-left-color: #d0d0d0;
  -webkit-transition: border linear .2s;
  -moz-transition: border linear .2s;
  transition: border linear .2s;
}
.write-blog .c-input {
  display: inline-block;
  height: 22px;
  padding: 5px 1% 3px 1%;
  margin-bottom: 10px;
  font-size: 12px;
  line-height: 20px;
  color: #111;
  border-radius: 0;
  vertical-align: middle;
  margin-top: 5px;
}
.write-blog .d-input {
  display: inline-block;
  height: 22px;
  padding: 5px 0px 3px 0px;
  margin-bottom: 10px;
  font-size: 12px;
  line-height: 20px;
  color: #111;
  border-radius: 0;
  vertical-align: middle;
  margin-top: 5px;
}
.write-blog .f-input {
  width: 98%;
}
.write-blog .o-input {
  height: 18px;
  margin: 0px;
  padding: 3px 5px;
}
.write-blog .t-input {
  width: 98%;
  height: 65px;
}
.write-blog .m-input {
  width: 100%;
  min-height: 450px;
  height: auto;
}
.write-blog .s-button {
  width: 200px;
  background: #428BD1;
  height: 32px;
  border: none;
  color: #FFF;
  margin-right: 10px;
  font-size: 14px;
  font-family: '微软雅黑', 'Verdana', 'sans-serif', '宋体';
  cursor: pointer;
}
.write-blog .s-button:hover {
  background: #3270AC;
}
.write-blog .blog-title {
  position: relative;
}
.write-blog .blog-title .catalog {
  position: absolute;
  right: 10px;
  top: 10px;
  display: inline-block;
  height: 22px;
  line-height: 22px;
  overflow: hidden;
  cursor: pointer;
  color: #FFF;
  z-index: 1000;
}
.write-blog .blog-title .catalog ul {
  border: 1px solid #FFF;
  background: #428BD1;
}
.write-blog .blog-title .catalog li {
  height: 22px;
  line-height: 22px;
  text-align: center;
  padding: 0px 5px;
  background: #428BD1;
}
.write-blog .blog-title .catalog li:hover {
  background: #4BA1F3;
}
.write-blog .section strong i {
  display: inline-block;
  width: 15px;
  height: 8px;
  margin-right: 8px;
}
.write-blog .section strong {
  vertical-align: middle;
}
.write-blog .check-ico {
  background: url("/img/selg.jpg") no-repeat right bottom;
  white-space: nowrap;
  line-height: 30px;
  color: #999;
  border: 2px solid #999;
  font-size: 9pt;
  padding: 3px 15px;
  cursor: pointer;
  margin: 0px 10px 1px 10px;
}
.write-blog .checked,
.multi-check:hover {
  background: url("/img/sel-b-type.gif") no-repeat right bottom;
  border: 2px solid #F00;
  color: #F00;
}
.write-blog .single-check:hover {
  color: #999;
}
.write-blog .checked:hover {
  color: #F00;
}
.write-blog .section .setting-title {
  color: #777;
  font-size: 12px;
  display: inline-block;
  margin-right: 10px;
  width: 120px;
}
.write-blog .sel-editor span.sel-box {
  float: right;
}
.write-blog .sel-editor .sel-box span {
  color: #FFF;
  padding: 2px 8px;
  background: #E7A940;
  cursor: pointer;
  font-size: 12px;
  float: left;
}
.write-blog .sel-editor span.sel-title {
  background: #FFF;
  color: #777;
}
.write-blog .sel-editor span.editor-item:hover {
  background: #CF932E;
}
.write-blog .sel-editor span.selected-editor {
  background: #40AA53;
}
.write-blog .err-msg {
  padding: 5px 15px;
  color: #F00;
  font-size: 12px;
}
.write-blog .ke-container {
  margin-top: 8px;
}
.write-blog .wmd-button .wmd-blog-prev {
  width: 60px;
  display: inline-block;
  background: #FFF;
  text-align: center;
}
.write-blog .wmd-button .wmd-blog-prev:hover {
  background: #99c0fa;
}
.edui-default {
  text-align: left;
}
/*博客分类下拉框*/
.write-blog .select_box {
  white-space: nowrap;
  line-height: 30px;
  color: #999;
  border: 2px solid #999;
  font-size: 9pt;
  padding: 3px 1px;
  cursor: pointer;
  margin: 0px 10px 1px 10px;
}
/* end 通用的表单 */
/* paging */
.pager {
  height: 28px;
  line-height: 28px;
  margin: 2px 0;
}
.pager li {
  font-size: 14px;
  text-align: center;
  margin: 0 2px 0 0;
  display: inline;
}
.pager li a {
  font-family: Courier New,Arial;
  color: #58595b;
  background-color: #f0f0f0;
  padding: 3px 5px;
  text-decoration: none;
}
.pager li a:hover {
  color: #000;
}
.pager li.prev a {
  background-color: #cccccc;
  color: #666666;
}
.pager li.next a {
  background-color: #cccccc;
  color: #666666;
}
.pager li.current a {
  color: #fff;
  background: #7798cb;
}
/*顶部导航条下拉框*/
#OSC_Banner .control_select ul.cs_content {
  border: 1px solid #40aa53;
}
#OSC_Banner .control_select ul li a {
  color: #40aa53;
}
/* end pager css */</style>
  <script type="text/javascript" src="/js/scrolltopcontrol.js"></script>
  <script type="text/javascript" src="/js/jquery/jquery.atwho.js?ver=2013112501"></script>
  <script type="text/javascript" src="/js/ng/angular.min.js"></script>
  <script type="text/javascript" src="/js/ng/angular-sanitize.min.js"></script>
  <script type="text/javascript" src="/js/ng/angular-resource.min.js"></script>
  <link rel="stylesheet" type="text/css" href="/js/jquery/jquery.atwho.css">
  <link rel="alternate" type="application/rss+xml" title="黄勇最新博客" href="http://my.oschina.net/huangyong/rss">
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://my.oschina.net/action/xmlrpc/rsd?space=223750">
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://my.oschina.net/action/xmlrpc/wlwmanifest?space=223750"> 
  <style type="text/css">
    body,table,input,textarea,select {font-family:微软雅黑,Verdana,sans-serif,宋体;}	
  </style>
  <script type="text/javascript">
  	scrolltotop.offset(100,165);
	scrolltotop.init();
  </script>
<style id="poshytip-css-tip-yellowsimple-medal" type="text/css">div.tip-yellowsimple-medal{visibility:hidden;position:absolute;top:0;left:0;}div.tip-yellowsimple-medal table, div.tip-yellowsimple-medal td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;}div.tip-yellowsimple-medal td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:10px;width:10px;overflow:hidden;}div.tip-yellowsimple-medal td.tip-right{background-position:100% 0;}div.tip-yellowsimple-medal td.tip-bottom{background-position:100% 100%;}div.tip-yellowsimple-medal td.tip-left{background-position:0 100%;}div.tip-yellowsimple-medal div.tip-inner{background-position:-10px -10px;}div.tip-yellowsimple-medal div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}</style><style>[touch-action="none"]{ -ms-touch-action: none; touch-action: none; }[touch-action="pan-x"]{ -ms-touch-action: pan-x; touch-action: pan-x; }[touch-action="pan-y"]{ -ms-touch-action: pan-y; touch-action: pan-y; }[touch-action="scroll"],[touch-action="pan-x pan-y"],[touch-action="pan-y pan-x"]{ -ms-touch-action: pan-x pan-y; touch-action: pan-x pan-y; }</style><style id="clearly_highlighting_css" type="text/css">/* selection */ html.clearly_highlighting_enabled ::-moz-selection { background: rgba(246, 238, 150, 0.99); } html.clearly_highlighting_enabled ::selection { background: rgba(246, 238, 150, 0.99); } /* cursor */ html.clearly_highlighting_enabled {    /* cursor and hot-spot position -- requires a default cursor, after the URL one */    cursor: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--cursor.png") 14 16, text; } /* highlight tag */ em.clearly_highlight_element {    font-style: inherit !important; font-weight: inherit !important;    background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--yellow.png");    background-repeat: repeat-x; background-position: top left; background-size: 100% 100%; } /* the delete-buttons are positioned relative to this */ em.clearly_highlight_element.clearly_highlight_first { position: relative; } /* delete buttons */ em.clearly_highlight_element a.clearly_highlight_delete_element {    display: none; cursor: pointer;    padding: 0; margin: 0; line-height: 0;    position: absolute; width: 34px; height: 34px; left: -17px; top: -17px;    background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--delete-sprite.png"); background-repeat: no-repeat; background-position: 0px 0px; } em.clearly_highlight_element a.clearly_highlight_delete_element:hover { background-position: -34px 0px; } /* retina */ @media (min--moz-device-pixel-ratio: 2), (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {    em.clearly_highlight_element { background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--yellow@2x.png"); }    em.clearly_highlight_element a.clearly_highlight_delete_element { background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--delete-sprite@2x.png"); background-size: 68px 34px; } } </style></head>
<body>
<div id="OSC_Screen">
	<style type="text/css">
    #OSC_Banner {margin: 0 auto;text-align: left;margin-bottom: 5px;height:30px;border-top:0px;}
    #OSC_Banner a {text-decoration: none;color: #fff;}
    #OSC_Banner .cs_content a {color: #080;}
    #OSC_Banner a:hover {color: #eee;}
	#OSC_Banner a.project{background-color:transparent;}
    #OSC_Banner #OSC_Channel {float: left;height:30px;}
    #OSC_Banner #OSC_Channel ul {line-height: 18px;}
    #OSC_Banner #OSC_Channel ul li.item {float: left;margin: 0 16px 0 0;line-height: 30px;}
    #OSC_Banner #OSC_Channel ul li a.hl {font-weight: bold;}
    #OSC_Banner #OSC_Userbar {float: right;	color: #ddd;line-height:30px;margin-right:10px;}
    #OSC_Banner #OSC_Userbar em {font-style: normal;color: #fff;margin-right: 2px;}
	/*下拉菜单*/
	#OSC_Banner .control_select {position: relative;background: url('/img/down3.gif') no-repeat right 14px;padding-right: 8px;cursor: pointer;height: 25px;display: inline-block;z-index: 1001;}
	#OSC_Banner .control_select a {position: relative;}
	#OSC_Banner .control_select ul.cs_content {display: none;text-align: left;position: absolute;left: 0px;top: 25px;width: 110px;z-index: 9999;background: white;padding: 5px 0 2px 5px;font-size: 9pt;list-style-type: none;}
	#OSC_Banner .control_select ul.cs_content li {border: 0;height: 16px;line-height: 16px;margin-bottom: 8px;}
	#OSC_Banner .control_select ul.cs_content li a:hover {font-weight: bold;background: #fff;color: #A00}
	#OSC_Banner .group_msg_count {display: inline-block;	padding: 2px;border-radius: 3px;background-color: RGB(255, 113, 112);color: white;font-size: 12px;height: 10px;text-align: center;
		line-height: 10px;min-width: 15px;box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);-webkit-box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);-moz-box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);}
	.tip-yellowsimple .tip-arrow-top{left:80%;}
</style>
<script type="text/javascript">
  	g_user = {
	id:0,
	name:'',
	login:false};</script>
<script type="text/javascript" src="/js/utils.js"></script>
<script type="text/javascript" src="/js/channel.js?2014022501"></script>
<div id="OSC_Banner">
        <div id="OSC_Channel" style="float:left;margin-left:10px;">
        	<ul>
        	<li class="item"><a href="http://www.oschina.net/" class="home">首页</a></li>        	<li class="item control_select"><a href="http://www.oschina.net/project" class="project">开源项目</a>
				<ul class="cs_content">					
                	                	<li><a href="http://www.oschina.net/project/lang/19/java">Java 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/194/csharp">C# 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/22/php">PHP 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/21/c">C/C++ 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/26/ruby">Ruby 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/25/python">Python 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/358/go">Go开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/28/javascript">JS开源软件</a></li>
				</ul>
			</li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/question" class="question">讨论区</a>				
				<ul class="cs_content">					
                	<li><a href="http://www.oschina.net/question?catalog=1"> 技术问答 » </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=2"> 技术分享 » </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=3"> IT大杂烩 » </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=100"> 职业生涯 » </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=4"> 站务/建议 » </a></li>
                	<li><a href="http://www.oschina.net/alipay"> 支付宝专区 » </a></li>
                	<li><a href="http://www.oschina.net/hardware"> 开源硬件专区 » </a></li>
				</ul>
			</li>
        	<li class="item"><a href="http://www.oschina.net/code/list" class="code">代码</a></li>
        	        	<li class="item"><a href="http://www.oschina.net/blog" class="blog">博客</a></li>
        	<li class="item"><a href="http://www.oschina.net/translate" class="tran">翻译</a></li>
            <li class="item"><a href="http://www.oschina.net/news" class="news">资讯</a></li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/android" class="mobile">移动开发</a>
				<ul class="cs_content cs_mobile">
                	<li class="android_"><a href="http://www.oschina.net/android">Android开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/home">iOS开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/codingList">iOS代码库</a></li>
                	<li class="wp7_"><a href="http://www.oschina.net/wp">Windows Phone</a></li>
				</ul>
			</li>
        	<li class="item t_job"><a href="http://www.oschina.net/job" class="job">招聘</a></li>
									            <li class="item control_select">
                <a href="http://city.oschina.net/" id="MyCities" title="城市圈">城市圈</a>
							</li>
        	</ul>
        </div>
		<div id="OSC_Userbar">
                		    		当前访客身份：游客 [ <a href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fmy.oschina.net%2Fhuangyong%2Fblog%2F208783">登录</a> | <a href="http://www.oschina.net/home/reg">加入开源中国</a> ]
    				</div>
		<div class="clear"></div>
</div>	<div id="OSC_Topbar">
		<div id="VisitorInfo">
		当前访客身份：
				游客 [ <a href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fmy.oschina.net%2Fhuangyong">登录</a> | <a href="http://www.oschina.net/home/reg">加入开源中国</a> ]
				
		</div>
		<div id="SearchBar">
    		<form action="http://www.oschina.net/search">
				<input type="hidden" name="user" value="223750">
																<span class="ipt f_l">
    			<input type="text" id="txt_q" name="q" class="SERACH" value="在 30960 款开源软件中搜索" onblur="(this.value=='')?this.value='在 30960 款开源软件中搜索':this.value" onfocus="if(this.value=='在 30960 款开源软件中搜索'){this.value='';};this.select();">
				</span>
				                <div class="search-by selectbox">
    				<span class="hide">
    				<select name="scope">					
                        <option value="project" selected="">软件</option>
                        <option value="code">代码</option>
                        <option value="bbs">讨论区</option>
                        <option value="news">新闻</option>
                        <option value="blog">博客</option>
    				</select>
    				</span>
                  <div class="search_on" id="search-item"><span class="text">软件</span></div>
                  <ul class="search_list" style="display: none;">
                     <li class="search-item"><a href="#1">软件</a></li>
                     <li><a href="#2">代码</a></li>
                     <li><a href="#3">讨论区</a></li>
                     <li><a href="#4">新闻</a></li>
                     <li><a href="#5">博客</a></li>
                  </ul>
                </div>
				<input type="submit" value="搜索" class="bnt f_r">			
    		</form>
		</div>
		<div class="clear"></div>
	</div>
	<div id="OSC_Content">	
<style>
	.icon{width:20px;height:20px;vertical-align: middle;display:inline-block;font-size:14px;text-align:center;color:#FFF;font-weight: bold;}
	.catalogs{padding:0px;margin:0px;position:relative;display:inline-block;}
    .catalogs ul{padding:0px;margin:0px;position:absolute;left:-8px;top: -21px;clear:left;width:120px;height:14px;overflow:hidden;background:#FFF;z-index:1000;padding:5px;border:1px solid #FFF;}
    .catalogs ul:hover{height:auto;background:#fff;border:1px solid #4466bb;}
    .catalogs ul li a:hover{color:#A00;font-weight: bold;}
	.BlogStat a:hover{background:#FFF;}
	.BlogStat{font-size:12px;line-height:20px;}
	.BlogStat .g{color:#40AA53}
	.BlogTags{margin-top:8px;}
		.BlogAbstracts{}
</style>
<div id="SpaceLeft">
<div class="Owner">
	    <a href="http://my.oschina.net/huangyong" class="Img"><img src="http://static.oschina.net/uploads/user/111/223750_100.jpg?t=1399644301000" align="absmiddle" alt="黄勇" title="黄勇" class="LargePortrait"></a>
    <span class="U">
                    <a href="http://my.oschina.net/huangyong" class="Name" title="男">黄勇</a>
        		<span class="opts">
			<img src="/img/2012/men.png" align="absmiddle" title="男">
        			<script type="text/javascript">
var nologin = "<a href='javascript:_follow_nologin()' title='成为TA的粉丝'>关注此人</a>"
var follow0 = "<a href='javascript:_follow_user(223750,true)' title='成为TA的粉丝'>关注此人</a>";
var follow1 = "已关注 | <a href='javascript:_follow_user(223750,false)' title='取消关注后，此人的更新信息将不会出现在你的首页'>取消</a>";
var follow2 = "互相关注 | <a href='javascript:_follow_user(223750,false)' title='取消关注后，此人的更新信息将不会出现在你的首页'>取消</a>";
var follow4 = "<a href='javascript:_follow_user(223750,true)' title='成为TA的粉丝'>+关注此人</a>";

document.write("<span id='_follow_223750_action_'>");
	document.write(nologin);
document.write("</span>");

function _follow_nologin(){
	if(confirm('必须登录后才能关注，是否现在登录？')){
		location.href="http://www.oschina.net/home/login?goto_page="+location.href;
	}
}

function _follow_user(uid, follow){
	var action = follow?"/action/user/follow":"/action/user/unfollow";
	ajax_post(action,"id="+uid+"&user=${g_user.id}",function(result){
		var act = $('#_follow_223750_action_');
		if(result == '0')
			_follow_nologin();
		else if(result == '1')
			act.html(follow0);
		else if(result == '2')
			act.html(follow1);
		else if(result == '3')
			act.html(follow2);
		else if(result == '4')
			act.html(follow4);
	});
}
</script><span id="_follow_223750_action_"><a href="javascript:_follow_nologin()" title="成为TA的粉丝">关注此人</a></span>				</span>
    </span>
    <div class="clear"></div>
    <div class="stat">
    	<a href="http://my.oschina.net/huangyong/fellow">关注<span>(33)</span></a>
    	<a href="http://my.oschina.net/huangyong/fans">粉丝<span>(1127)</span></a>
    	<a href="http://www.oschina.net/question/3307_20931" title="查看OSCHINA积分规则">积分<span>(684)</span></a>
                       
    </div>
</div>    	<div class="Medals clearfix">
        <ul id="Medals">
                    <li>
                <a class="clearfix" href="http://my.oschina.net/huangyong/admin/medals" medalid="22" title="开源项目作者">
                    <img src="http://static.oschina.net/uploads/medals/slogo1392107698619.png" alt="开源项目作者" width="24" height="24" title="开源项目作者">
                </a>
            </li>
                </ul>
	</div>
	<style type="text/css">
    #Medals {margin-left: 3px; height: 28px;}
    #Medals li {float: left;margin: 3px 5px;line-height: 24px;}
    .tip-yellowsimple-medal {
        z-index: 1000;
        text-align: left;
        border: 1px solid #E6DEB6;
        border-radius: 4px;
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        padding: 6px 8px;
        min-width: 50px;
        max-width: 300px;
        color: #000;
        background-color: #FFFEF2;
    }
	.tip-yellowsimple-medal .tip-arrow-left {
		visibility: inherit;
        margin-top: -4px;
        margin-left: -6px;
        top: 15px;
        left: 0;
        width: 6px;
        height: 9px;
        background: url(/js/2012/poshytip/tip-yellowsimple/tip-yellowsimple_arrows.gif) no-repeat -27px 0;
	}
	div.tip-yellowsimple-medal div.tip-arrow {
        visibility: hidden;
        position: absolute;
        overflow: hidden;
        font: 1px/1px sans-serif;
	}
</style>
<script type="text/javascript">
    $(function(){
        $('#Medals a').poshytip({
            className: 'tip-yellowsimple-medal',
            alignTo: 'target',
            alignX: 'right',
            alignY: 'bottom',
            offsetX: 10,
            offsetY: -30,
            fade: false,
            slide: false,
            content: function(updateCallback) {
                ajax_get("/action/ajax/get_medal_detail?owner=223750&medalId="+$(this).attr('medalId')+"&time="+new Date().getTime(),false,function(html){
                    updateCallback(html);
                    if($('.tip-arrow.tip-arrow-left').last().offset().top >= temp.offset().top) {
                        $('.tip-arrow.tip-arrow-left').last().css({top : "15px"});
                    }
                    else {
                        $('.tip-arrow.tip-arrow-left').last().css({top : "135px"});
                    }
                });
                temp = $(this);
                return "<div style='height:100px;'>Loading...</div>";
            }
        });
    });
</script>
<style>
#MyResume textarea {width:170px;height:60px;font-size:9pt;}
</style>
<div class="Resume" id="MyResume">
学习 • 讨论 • 总结 • 分享</div>

<div class="Opts clearfix">
	<a href="javascript:sendmsg(223750, 0)" class="a1 sendmsg"><i>.</i><span>发送留言</span></a>
	<a href="http://www.oschina.net/question/ask?user=223750" class="a2 ask"><i>.</i><span>请教问题</span></a>
</div><div class="Mod" id="BlogCatalogs">
  <strong> 博客分类</strong>
  <ul>
	    	<li><a href="http://my.oschina.net/huangyong/blog?catalog=393045">未分类</a><span>(0)</span></li>
		<li><a href="http://my.oschina.net/huangyong/blog?catalog=386891">Smart</a><span>(60)</span></li>
		<li><a href="http://my.oschina.net/huangyong/blog?catalog=388531">Java 那点事儿</a><span>(10)</span></li>
		<li><a href="http://my.oschina.net/huangyong/blog?catalog=393044">前端</a><span>(1)</span></li>
		<li><a href="http://my.oschina.net/huangyong/blog?catalog=393255">设计模式</a><span>(2)</span></li>
		<li><a href="http://my.oschina.net/huangyong/blog?catalog=393971">工具</a><span>(13)</span></li>
		<li><a href="http://my.oschina.net/huangyong/blog?catalog=407769">产品</a><span>(5)</span></li>
		<li><a href="http://my.oschina.net/huangyong/blog?catalog=437563">管理</a><span>(1)</span></li>
		<li><a href="http://my.oschina.net/huangyong/blog?catalog=438105">售前</a><span>(1)</span></li>
		<li><a href="http://my.oschina.net/huangyong/blog?catalog=447643">职场</a><span>(1)</span></li>
		<li><a href="http://my.oschina.net/huangyong/blog?catalog=458370">源码分析</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/huangyong/blog?catalog=386791">代码备忘</a><span>(8)</span></li>
	  </ul>
</div><div class="Mod" id="HotBlogs">
  <strong>阅读排行</strong>
  <ol>
			<li><a href="http://my.oschina.net/huangyong/blog/158380">1. Smart Framework：轻量级 Java Web 框架</a></li>
				<li><a href="http://my.oschina.net/huangyong/blog/161338">2. AOP 那点事儿</a></li>
				<li><a href="http://my.oschina.net/huangyong/blog/159489">3. ThreadLocal 那点事儿</a></li>
				<li><a href="http://my.oschina.net/huangyong/blog/158916">4. Entity 映射机制实现原理</a></li>
				<li><a href="http://my.oschina.net/huangyong/blog/159788">5. Proxy 那点事儿</a></li>
				<li><a href="http://my.oschina.net/huangyong/blog/177559">6. 一个简单的 Cache 淘汰策略</a></li>
				<li><a href="http://my.oschina.net/huangyong/blog/159725">7. ThreadLocal 那点事儿（续集）</a></li>
				<li><a href="http://my.oschina.net/huangyong/blog/198109">8. 安装 CAS 服务器</a></li>
		  </ol>
</div>
<div class="Mod" id="BlogReplies">
  <strong> 最新评论</strong>  
      <ul>
		<li>
		<a href="http://my.oschina.net/u/1468006">@nerdy</a>：唔,自己找到了...不过还是多谢楼主的提示....这些...
		<a href="/action/tweet/go?obj=280598192&amp;type=18&amp;user=1468006">查看»</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/1468006">@nerdy</a>：请教下楼主 如果是配合spring使用.那么初始化是怎...
		<a href="/action/tweet/go?obj=280597759&amp;type=18&amp;user=1468006">查看»</a>
	</li>
		<li>
		<a href="http://my.oschina.net/wangshengch">@Wangshengchao</a>：你好，我目前也在单点登录环境下利用ajax取数据。...
		<a href="/action/tweet/go?obj=280595016&amp;type=18&amp;user=1586960">查看»</a>
	</li>
		<li>
		<a href="http://my.oschina.net/huangyong">@黄勇</a>：引用来自“Larry_OS”的评论在 BaseAspect 中增加...
		<a href="/action/tweet/go?obj=280576826&amp;type=18&amp;user=223750">查看»</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/1471128">@Larry_OS</a>：在 BaseAspect 中增加 begin() 与 final() 方法：...
		<a href="/action/tweet/go?obj=280571123&amp;type=18&amp;user=1471128">查看»</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/1471128">@Larry_OS</a>：@First 每次启动的时候都能保证获取到的是同一个...
		<a href="/action/tweet/go?obj=280571023&amp;type=18&amp;user=1471128">查看»</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/1471128">@Larry_OS</a>：支持!
		<a href="/action/tweet/go?obj=280527997&amp;type=18&amp;user=1471128">查看»</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/994356">@lg_aires</a>：学习，感谢
		<a href="/action/tweet/go?obj=280495172&amp;type=18&amp;user=994356">查看»</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/994356">@lg_aires</a>：学习中。。。
		<a href="/action/tweet/go?obj=280494142&amp;type=18&amp;user=994356">查看»</a>
	</li>
		<li>
		<a href="http://my.oschina.net/u/994356">@lg_aires</a>：学习了
		<a href="/action/tweet/go?obj=280491691&amp;type=18&amp;user=994356">查看»</a>
	</li>
	  </ul>
  </div>
<div class="Mod" id="BlogLinks">
  <strong>友情链接</strong>
  <ul>
	        <li><a href="http://my.oschina.net/u/1166271" target="_blank">1. 哈库纳 - Hasor</a></li>
	        <li><a href="http://my.oschina.net/tinyframework" target="_blank">2. 悠悠然然 - Tiny</a></li>
	        <li><a href="http://my.oschina.net/flashsword" target="_blank">3. 黄亿华 - WebMagic</a></li>
	        <li><a href="http://my.oschina.net/snakerflow" target="_blank">4. Dead_knight - Snaker</a></li>
	  </ul>
</div>
<div class="Mod" id="Stat">
<strong>访客统计</strong>
<ul>
	<li><label>今日访问：</label>17</li>
    <li><label>昨日访问：</label>169</li>
    <li><label>本周访问：</label>333</li>
    <li><label>本月访问：</label>2849</li>
    <li><label>所有访问：</label>87107</li>
</ul>
</div></div>

<div class="SpaceList">
	<div class="TopBar">
    	<div class="NavPath">		
    		<a href="http://my.oschina.net/huangyong">空间</a> » <a href="http://my.oschina.net/huangyong/blog">博客</a>			
			» 
						<span class="catalogs">
    			<ul>
    										<li><a href="http://my.oschina.net/huangyong/blog?catalog=388531">Java 那点事儿</a></li>
					        			        				<li><a href="http://my.oschina.net/huangyong/blog?catalog=393045">未分类</a></li>    				        				<li><a href="http://my.oschina.net/huangyong/blog?catalog=386891">Smart</a></li>    				        				    				        				<li><a href="http://my.oschina.net/huangyong/blog?catalog=393044">前端</a></li>    				        				<li><a href="http://my.oschina.net/huangyong/blog?catalog=393255">设计模式</a></li>    				        				<li><a href="http://my.oschina.net/huangyong/blog?catalog=393971">工具</a></li>    				        				<li><a href="http://my.oschina.net/huangyong/blog?catalog=407769">产品</a></li>    				        				<li><a href="http://my.oschina.net/huangyong/blog?catalog=437563">管理</a></li>    				        				<li><a href="http://my.oschina.net/huangyong/blog?catalog=438105">售前</a></li>    				        				<li><a href="http://my.oschina.net/huangyong/blog?catalog=447643">职场</a></li>    				        				<li><a href="http://my.oschina.net/huangyong/blog?catalog=458370">源码分析</a></li>    				        				<li><a href="http://my.oschina.net/huangyong/blog?catalog=386791">代码备忘</a></li>    				    				        				<li><a href="http://my.oschina.net/huangyong/blog">所有分类</a></li>
    				    			</ul>
			</span>
    	</div>
	</div>
	
    	<div class="BlogEntity">		
      <div class="BlogTitle">
        <h1><span class="icon" style="background:#44ac57;" title="原创博客">原</span>			<span class="icon" style="background:#fd9c47;" title="首页推荐过的博客">荐</span>												Shiro 那点事儿</h1>
        <div class="BlogStat">
    		    		发表于3个月前(2014-03-17 01:45)&nbsp;&nbsp;
    		阅读（<span class="g">2516</span>）&nbsp;|&nbsp;评论（<a href="#comments"><span class="g">32</span></a>）
    					    	    <span class="admin">
				<style>
#TagsSwitcher{color:#A00;}
#RecTags,#MyTags{margin:5px 0;}
#RecTags a.tag{line-height:24px;}
#favor_form p:first-child{margin:5px 0;}
#favor_form{width:200px;}
#favor_form p {color:#666;}
#favor_form form{min-height: 85px;width:200px;}
#favor_form form ._favor_input{display:block;margin:2px 0;width:199px;}
#favor_form form ._favor_button{float:left;padding:2px 5px;}
.favor_ok {text-align:center;font-size:10.5pt;width:199px;height:60px;margin-top:10px;}
#TagsSwitcher{cursor:pointer;float:right;margin-top:10px;}
#MyTags{display:none;width:199px;}
#MyTags a.tag {float:left; background-color: #E0EAF1;border-bottom: 1px solid #3E6D8E;border-right: 1px solid #7F9FB6;color: #3E6D8E;font-size: 8pt;line-height: 16px;margin: 2px 2px 2px 0;padding: 2px 4px;text-decoration: none;white-space: nowrap;}
#MyTags a.tag:hover{background-color: #3E6D8E;color: #FFF;}
</style>
<script type="text/javascript">
var favor_add = "<a href='javascript:add_to_favor(208783,3)' id='favor_trigger' title='添加到收藏夹'>我要收藏</a>";
var favor_del = "<a href='javascript:delete_favor(208783,3)' id='favor_trigger' style='color:#a00;'>取消收藏</a>";
var favor_ok = "<p class='favor_ok'>已成功添加到收藏夹<br/><br/> <a href='null/favorites?type=3'>我的收藏夹</a> | <a href='javascript:close_favor()'>关闭</a></p>";
function delete_favor(obi_id, obj_type){
	$('#attention_it').html(favor_add);
	$("#p_attention_count").load("/action/favorite/cancel?type="+obj_type+"&id="+obi_id, {user: ''});
}
function add_to_favor(obj_id, obj_type){
	if(confirm('必须登录后才能收藏，是否现在登录？')){
		location.href="http://www.oschina.net/home/login?goto_page="+encodeURIComponent(location.href);
	}
}
function close_favor(elem_id){
    $('#favor_trigger').poshytip('destroy');
}
function setTag(tv){
	var t = $("._favor_input");
	var value = t.val();
	var tags = value.replace(/，/ig,',').split(',');
	var exist = false;
	value = $.map(tags,function(v,i){
		if($.trim(tv) == $.trim(v)){
			exist = true;
			return undefined;
		}
		return v;
	}).join(',');
	if(exist){
		t.val(value);
		return;
	}
	if(value!="")
		t.val(value+","+tv);
	else
		t.val(tv)
}
function ltrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(0)) != -1){
        var j=0, i = s.length;
        while (j < i && whitespace.indexOf(s.charAt(j)) != -1){
            j++;
        }
        s = s.substring(j, i);
    }
    return s;
}

function rtrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(s.length-1)) != -1){
        var i = s.length - 1;
        while (i >= 0 && whitespace.indexOf(s.charAt(i)) != -1){
            i--;
        }
        s = s.substring(0, i+1);
    }
    return s;
}
 
function trim(str){
    return rtrim(ltrim(str));
}
</script>
<em id="p_attention_count">166</em>人收藏此文章,
<span id="attention_it">
	<script type="text/javascript">document.write(favor_add);</script><a href="javascript:add_to_favor(208783,3)" id="favor_trigger" title="添加到收藏夹">我要收藏</a>
</span>
<script type="text/javascript">
	$(document).ready(function(){
    	$.ajax({
    		url:"/action/favorite/attentionUsersCount",
    		type:"get",
    		data:"id="+208783+"&type="+3,
    		success:function(msg){
				$("#p_attention_count").html(msg);
    		}
    	});
	});
</script>			</span>
			    	</div>
		<div class="tvote" onclick="vote(208783)" title="都有15个人赞过了，你也来赞一下吧！不会扣积分哦！"><em class="vote">赞</em><em class="num vote_count">15</em></div>
      </div>
	  
	  <a name="kindeditor"></a>
	            <div class="BlogAbstracts">
						           <div class="BlogTags">
        	        	<a href="http://www.oschina.net/search?scope=blog&amp;q=Java%E9%82%A3%E7%82%B9%E4%BA%8B%E5%84%BF" class="tag">Java那点事儿</a>
        	        	<a href="http://www.oschina.net/search?scope=blog&amp;q=Shiro" class="tag">Shiro</a>
        	           </div>
		   		  </div><br>
	  	  	  <div class="BlogContent"><p> 前几天我遇见了一位美女，真有种相逢恨晚的感觉。她皮肤白皙、气质优雅、楚楚动人，拥有苗条的身材，却又不失丰满之躯，正所谓“该大的地方大，该小的地方小”，她就是我朝思梦想的情人。 </p> 
<p> 她就是 Apache 组织下的名媛 —— Shiro（希罗），一款轻量级 Java 安全框架。如果您已经玩腻了丰满的 Spring Security，想品尝一下新口味的话，建议先到她的裙下一睹风光吧： </p> 
<blockquote> 
 <span style="font-size:18px;">Apache Shiro 官网：</span> 
 <a href="http://shiro.apache.org/" target="_blank" rel="nofollow"><span style="font-size:18px;">http://shiro.apache.org/</span></a> 
</blockquote> 
<p> 从官网上，我们基本上可以了解到，她提供的服务非常明确： </p> 
<ol> 
 <li> <p> <span style="line-height:1.5;font-size:12.5px;">Authentication（认</span><span style="line-height:1.5;font-size:12.5px;">证）</span> </p> </li> 
 <li> <p> <span style="line-height:1.5;font-size:12.5px;">Authorization（授权）</span> </p> </li> 
 <li> <p> <span style="line-height:1.5;font-size:12.5px;">Session Management（会话管理）</span> </p> </li> 
 <li> <p> <span style="line-height:1.5;font-size:12.5px;">Cryptography（加密）</span> </p> </li> 
</ol> 
<p> 首先，她提供了&nbsp;Authentication（认证）服务，也就是说，通过她可以完成身份认证，让她去判断您是否为真实的会员。 </p> 
<p> <span style="line-height:1.5;font-size:12.5px;">其次，她还提供了&nbsp;Authorization（授权）</span><span style="line-height:1.5;font-size:12.5px;">服务，其实说白了就是“访问控制”服务，也就是让她来识别您是否可以做某件事情，毕竟不同的会员是拥有不同的权限的。</span> </p> 
<p> <span style="line-height:1.5;font-size:12.5px;">更有特色的是，她还提供了&nbsp;Session Management（会话管理）服务，这个就厉害了，这并不是您熟知的&nbsp;HTTP Session，而是一个独立的 Session 管理框架，不管是否为&nbsp;Web 应用，都可以用这套框架。</span> </p> 
<p> 最后（但并不是最不重要的），她还提供了&nbsp;Cryptography（加密）服务，封装了许多密码学算法，有您知道的，也有您不知道的，总之琳琅满目，应有尽有。 </p> 
<p> 除了以上 4 个基本服务以外，她也提供很好的系统集成方案，您可以轻松将其运用到 Web 应用中，可能这也是您最关心的。此外，还可以集成第三方框架，例如：Spring、Guice、CAS 等。 </p> 
<p> 想必您已经了解了 Shiro 的主要功能，那么如何才能真正占有她呢？不妨先<span style="line-height:1.5;font-size:12.5px;">主动跟她打声招呼吧：Hello Shiro！</span> </p> 
<h1> Hello Shiro </h1> 
<p> 如果您与我一样，也使用 Maven 的话，可以将以下配置复制到您的 pom.xml 文件中： </p> 
<div id="highlighter_364577" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_364577_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_364577" menu="false" src="/js/syntax-highlighter-2.1.382/scripts/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="comments">&lt;!--&nbsp;SLFJ&nbsp;--&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">groupId</code><code class="plain">&gt;org.slf4j&lt;/</code><code class="keyword">groupId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">artifactId</code><code class="plain">&gt;slf4j-log4j12&lt;/</code><code class="keyword">artifactId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">version</code><code class="plain">&gt;1.6.4&lt;/</code><code class="keyword">version</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="comments">&lt;!--&nbsp;Shiro&nbsp;--&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">groupId</code><code class="plain">&gt;org.apache.shiro&lt;/</code><code class="keyword">groupId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">artifactId</code><code class="plain">&gt;shiro-core&lt;/</code><code class="keyword">artifactId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">version</code><code class="plain">&gt;1.2.3&lt;/</code><code class="keyword">version</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div></div></div> 
<p> 需要说明的是，Shiro 依赖于&nbsp;SLFJ 日志框架，而&nbsp;SLFJ 只是一个接口，并没有提供具体的实现，您可以选择 Log4J 作为它的实现，正好&nbsp;SLFJ 也提供了一个&nbsp;slf4j-log4j12 的 Artifact，所以这就用上了。 </p> 
<p> 下面是 hello 项目的 Maven 依赖图： </p> 
<p> <a href="http://static.oschina.net/uploads/space/2014/0316/231334_ydzB_223750.png" target="_blank"><img alt="" src="http://static.oschina.net/uploads/space/2014/0316/231334_ydzB_223750.png" style="cursor: pointer;"></a> </p> 
<p> 既然使用了 Log4J，那么就应该在 classpath 下提供一个 log4j.properties 文件： </p> 
<div id="highlighter_675258" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_675258_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_675258" menu="false" src="/js/syntax-highlighter-2.1.382/scripts/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">log4j.rootLogger&nbsp;=&nbsp;INFO,&nbsp;console</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">log4j.appender.console&nbsp;=&nbsp;org.apache.log4j.ConsoleAppender</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">log4j.appender.console.layout&nbsp;=&nbsp;org.apache.log4j.PatternLayout</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">log4j.appender.console.layout.ConversionPattern&nbsp;=&nbsp;%-5p&nbsp;%c(%L)&nbsp;-&nbsp;%m%n</code></td></tr></tbody></table></div></div></div> 
<p> 通过上面的配置将日志输出到控制台上，并配置了日志输出格式。 </p> 
<p> 同样，既然使用了 Shiro，那么就应该在 classpath 下提供一个 shiro.ini 文件： </p> 
<div id="highlighter_893586" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_893586_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_893586" menu="false" src="/js/syntax-highlighter-2.1.382/scripts/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">[users]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">shiro&nbsp;=&nbsp;</code><code class="value">201314</code></td></tr></tbody></table></div></div></div> 
<p> 很简单的配置，我们配置了一个用户名为 shiro，密码为“爱你一生一世”的用户。当然，这里仅为演示，在您的实际项目中肯定不会把用户信息定义在配置文件中，除非这个项目的用户只有您自己。 </p> 
<p> 我们就用这个用户来见识一下 Shiro 的认证服务功能吧，不妨写一个 main 方法试试： </p> 
<div id="highlighter_670722" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_670722_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_670722" menu="false" src="/js/syntax-highlighter-2.1.382/scripts/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">import</code>&nbsp;<code class="plain">org.apache.shiro.SecurityUtils;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="keyword">import</code>&nbsp;<code class="plain">org.apache.shiro.authc.AuthenticationException;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">import</code>&nbsp;<code class="plain">org.apache.shiro.authc.UsernamePasswordToken;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="keyword">import</code>&nbsp;<code class="plain">org.apache.shiro.config.IniSecurityManagerFactory;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="keyword">import</code>&nbsp;<code class="plain">org.apache.shiro.mgt.SecurityManager;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="keyword">import</code>&nbsp;<code class="plain">org.apache.shiro.subject.Subject;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="keyword">import</code>&nbsp;<code class="plain">org.apache.shiro.util.Factory;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="keyword">import</code>&nbsp;<code class="plain">org.slf4j.Logger;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="keyword">import</code>&nbsp;<code class="plain">org.slf4j.LoggerFactory;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="keyword">public</code>&nbsp;<code class="keyword">class</code>&nbsp;<code class="plain">HelloShiro&nbsp;{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code>&nbsp;<code class="keyword">static</code>&nbsp;<code class="keyword">final</code>&nbsp;<code class="plain">Logger&nbsp;logger&nbsp;=&nbsp;LoggerFactory.getLogger(HelloShiro.</code><code class="keyword">class</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code>&nbsp;<code class="keyword">static</code>&nbsp;<code class="keyword">void</code>&nbsp;<code class="plain">main(String[]&nbsp;args)&nbsp;{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">//&nbsp;初始化&nbsp;SecurityManager</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">Factory&lt;SecurityManager&gt;&nbsp;factory&nbsp;=&nbsp;</code><code class="keyword">new</code>&nbsp;<code class="plain">IniSecurityManagerFactory(</code><code class="string">"classpath:shiro.ini"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">SecurityManager&nbsp;securityManager&nbsp;=&nbsp;factory.getInstance();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">SecurityUtils.setSecurityManager(securityManager);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">//&nbsp;获取当前用户</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">Subject&nbsp;subject&nbsp;=&nbsp;SecurityUtils.getSubject();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">//&nbsp;登录</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">UsernamePasswordToken&nbsp;token&nbsp;=&nbsp;</code><code class="keyword">new</code>&nbsp;<code class="plain">UsernamePasswordToken(</code><code class="string">"shiro"</code><code class="plain">,&nbsp;</code><code class="string">"201314"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">try</code>&nbsp;<code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">subject.login(token);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}&nbsp;</code><code class="keyword">catch</code>&nbsp;<code class="plain">(AuthenticationException&nbsp;ae)&nbsp;{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">logger.info(</code><code class="string">"登录失败！"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">logger.info(</code><code class="string">"登录成功！Hello&nbsp;"</code>&nbsp;<code class="plain">+&nbsp;subject.getPrincipal());</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments">//&nbsp;注销</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">subject.logout();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div> 
<p> <span style="line-height:1.5;font-size:12.5px;">我们分析一下这个 HelloShiro 吧：</span> </p> 
<ol> 
 <li> <p> <span style="line-height:1.5;font-size:12.5px;">需要读取 classpath 下的&nbsp;shiro.ini 配置文件，并通过工厂类创建&nbsp;SecurityManager 对象，最终将其放入&nbsp;SecurityUtils 中，供 Shiro 框架随时获取。</span> </p> </li> 
 <li> <p> 同样通过 SecurityUtils 类获取 Subject 对象，其实就是当前用户，只不过在 Shiro 的世界里优雅地将其称为 Subject（主体）。 </p> </li> 
 <li> <p> 首先使用一个 Username 与 Password，来创建一个 UsernamePasswordToken 对象，然后我们通过这个 Token 对象调用 Subject 对象的 login 方法，让 Shiro 进行用户身份认证。 </p> </li> 
 <li> <p> 当登录失败时，您可以使用&nbsp;AuthenticationException 来捕获这个异常；当登录成功时，您可以调用 Subject 对象的 getPrincipal 方法来获取 Username，此时 Shiro 已经为您创建了一个 Session。 </p> </li> 
 <li> <p> 最后还是通过 Subject 对象的 logout 方法来注销本次 Session。 </p> </li> 
</ol> 
<p> <span style="line-height:1.5;font-size:12.5px;"></span> </p> 
<p> 感觉还不错吧？您只需要知道以上几个&nbsp;Shiro 的核心成员的基本用法，Shiro 就是您的了。 </p> 
<p> 其实，Shiro 的内部调用流程也不难理解： </p> 
<p> <a href="http://static.oschina.net/uploads/space/2014/0316/235259_hd3w_223750.jpg" target="_blank"><img src="http://static.oschina.net/uploads/space/2014/0316/235259_hd3w_223750.jpg" alt="" style="cursor: pointer;"></a> </p> 
<p> 通过 Subject 调用 SecurityManager，通过 SecurityManager 调用 Realm。这个 Realm 感觉有点生僻，其实就是提供用户信息的数据源了，在以上例子在 shiro.ini 里配置的用户信息就是一种 Realm，在 Shiro 中叫做 IniRealm。除此以外，Shiro 还提供了其它几种 Realm：PropertiesRealm、JdbcRealm、JndiLdapRealm、ActiveDirectoryReam 等，当然也可以定制 Realm 来满足您的业务需求。 </p> 
<p> 不难发现，SecurityManager 是才是 Shiro 的真正的核心，您只需通过 Subject 就可以操作&nbsp;SecurityManager，尤其是在 Web 应用中，您甚至都可以忘记&nbsp;SecurityManager 的存在。 </p> 
<p> 那么，在 Web 中应该如何使用 Shiro 呢？我们继续吧！ </p> 
<h1> 在 Web 开发中使用 Shiro </h1> 
<p> 您可以直接在 Web 应用中使用 Shiro 官方提供的&nbsp;Web 模块 —— shiro-web。 </p> 
<p> 只需在您的 pom.xml 文件中增加如下配置： </p> 
<div id="highlighter_230415" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_230415_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_230415" menu="false" src="/js/syntax-highlighter-2.1.382/scripts/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">groupId</code><code class="plain">&gt;org.apache.shiro&lt;/</code><code class="keyword">groupId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">artifactId</code><code class="plain">&gt;shiro-web&lt;/</code><code class="keyword">artifactId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">version</code><code class="plain">&gt;1.2.3&lt;/</code><code class="keyword">version</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div></div></div> 
<p> <span style="font-size:12.5px;line-height:1.5;">随后，在您的 web.xml 中添加一个 Listener 与一个 Filter：</span> </p> 
<div id="highlighter_427192" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_427192_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_427192" menu="false" src="/js/syntax-highlighter-2.1.382/scripts/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">&lt;?</code><code class="keyword">xml</code>&nbsp;<code class="color1">version</code><code class="plain">=</code><code class="string">"1.0"</code>&nbsp;<code class="color1">encoding</code><code class="plain">=</code><code class="string">"UTF-8"</code><code class="plain">?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">web-app</code>&nbsp;<code class="color1">xmlns</code><code class="plain">=</code><code class="string">"http://java.sun.com/xml/ns/javaee"</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">xmlns:xsi</code><code class="plain">=</code><code class="string">"http://www.w3.org/2001/XMLSchema-instance"</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">xsi:schemaLocation="http://java.sun.com/xml/ns/javaee</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">version</code><code class="plain">=</code><code class="string">"3.0"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">listener</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">listener-class</code><code class="plain">&gt;org.apache.shiro.web.env.EnvironmentLoaderListener&lt;/</code><code class="keyword">listener-class</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;/</code><code class="keyword">listener</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">filter</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">filter-name</code><code class="plain">&gt;ShiroFilter&lt;/</code><code class="keyword">filter-name</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">filter-class</code><code class="plain">&gt;org.apache.shiro.web.servlet.ShiroFilter&lt;/</code><code class="keyword">filter-class</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;/</code><code class="keyword">filter</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">filter-mapping</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">filter-name</code><code class="plain">&gt;ShiroFilter&lt;/</code><code class="keyword">filter-name</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">url-pattern</code><code class="plain">&gt;/*&lt;/</code><code class="keyword">url-pattern</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;/</code><code class="keyword">filter-mapping</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">web-app</code><code class="plain">&gt;</code></td></tr></tbody></table></div></div></div> 
<p> 实际上就是通过&nbsp;EnvironmentLoaderListener 这个监听器来初始化 SecurityManager 的，并且通过&nbsp;ShiroFilter 来完成认证与授权的。 </p> 
<p> 可以使用以下数据表结构来存放您的用户及其权限相关数据，这就是传说中的&nbsp;RBAC 模型： </p> 
<p> <a href="http://static.oschina.net/uploads/space/2014/0317/014756_aTGr_223750.png" target="_blank"><img src="http://static.oschina.net/uploads/space/2014/0317/014756_aTGr_223750.png" alt="" style="cursor: pointer;"></a> </p> 
<p> 然后通过 Shiro 的 JdbcReam 来进行认证与授权，这一切都是那么的简单，只需您在 shiro.ini 中做如下配置： </p> 
<div id="highlighter_16827" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_16827_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_16827" menu="false" src="/js/syntax-highlighter-2.1.382/scripts/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">[main]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">authc.loginUrl = /login</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">ds&nbsp;=&nbsp;org.apache.commons.dbcp.BasicDataSource</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">ds.driverClassName&nbsp;=&nbsp;com.mysql.jdbc.Driver</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">ds.url&nbsp;=&nbsp;jdbc:mysql:</code><code class="comments">//localhost:3306/sample</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">ds.username&nbsp;=&nbsp;root</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">ds.password&nbsp;=&nbsp;root</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">jdbcRealm&nbsp;=&nbsp;org.apache.shiro.realm.jdbc.JdbcRealm</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">jdbcRealm.dataSource&nbsp;=&nbsp;$ds</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">jdbcRealm.authenticationQuery&nbsp;=&nbsp;select&nbsp;password&nbsp;from&nbsp;user&nbsp;where&nbsp;username&nbsp;=&nbsp;?</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">jdbcRealm.userRolesQuery&nbsp;=&nbsp;select&nbsp;r.role_name&nbsp;from&nbsp;user&nbsp;u,&nbsp;user_role&nbsp;ur,&nbsp;role&nbsp;r&nbsp;where&nbsp;u.id&nbsp;=&nbsp;ur.user_id&nbsp;and&nbsp;r.id&nbsp;=&nbsp;ur.role_id&nbsp;and&nbsp;u.username&nbsp;=&nbsp;?</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">jdbcRealm.permissionsQuery&nbsp;=&nbsp;select&nbsp;p.permission_name&nbsp;from&nbsp;role&nbsp;r,&nbsp;role_permission&nbsp;rp,&nbsp;permission&nbsp;p&nbsp;where&nbsp;r.id&nbsp;=&nbsp;rp.role_id&nbsp;and&nbsp;p.id&nbsp;=&nbsp;rp.permission_id&nbsp;and&nbsp;r.role_name&nbsp;=&nbsp;?</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">jdbcRealm.permissionsLookupEnabled&nbsp;=&nbsp;</code><code class="keyword">true</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">securityManager.realms&nbsp;=&nbsp;$jdbcRealm</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">[urls]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">/&nbsp;=&nbsp;anon</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">/space/**&nbsp;=&nbsp;authc</code></td></tr></tbody></table></div></div></div> 
<p> <span style="line-height:1.5;font-size:12.5px;">对以上配置解释如下：</span> </p> 
<p> <span style="line-height:1.5;font-size:12.5px;">首先，在 [main] 片段中，我们定义了一个“</span><span style="line-height:1.5;font-size:12.5px;">authc.loginUrl=/login</span><span style="line-height:1.5;font-size:12.5px;">”，用于配置当需要认证时需要跳转的 URL 地址，这里表示重定向到 /login 请求，通过 Servlet 映射后可定位到 login 页面。</span> </p> 
<p> <span style="line-height:1.5;font-size:12.5px;">然后，定义了一个 DBCP 的 DataSource，用于获取 JDBC 数据库连接。</span> </p> 
<p> <span style="line-height:1.5;font-size:12.5px;">然后，定义 JdbcRealm 并指定 DataSource，通过配置以下几条 SQL 来完成认证与授权：</span> </p> 
<ul> 
 <li> <p> <span style="line-height:1.5;font-size:12.5px;"></span><span style="line-height:1.5;font-size:12.5px;">authenticationQuery：该 SQL 语句用于提供身份认证，即通过 username 查询 password。</span> </p> </li> 
 <li> <p> <span style="font-size:12.5px;line-height:1.5;">userRolesQuery：该 SQL 语句用于提供基于角色的授权验证（属于粗粒度级别），即通过 username 查询 role_name。</span> </p> </li> 
 <li> <p> <span style="font-size:12.5px;line-height:1.5;">permissionQuery：该 SQL 语句用于提供基于权限的授权验证（属于细粒度级别），即通过 role_name 查询 permission_name，此时需要开启&nbsp;permissionsLookupEnabled 开关，默认是关闭的。</span> </p> </li> 
</ul> 
<p> 最后，在 [urls] 片段中，我们定义了一系列的 URL 过滤规则，Shiro 已经提供了一些默认的 Filter（过滤器），便于我们随时使用，当然您也可以扩展其它的过滤器。就本例配置而言，解释如下： </p> 
<ul> 
 <li> <p> <span style="line-height:1.5;font-size:12.5px;">/ = anon：对于“/”请求（首页）可以匿名访问的。</span> </p> </li> 
 <li> <p> <span style="line-height:1.5;font-size:12.5px;">/space/** = authc：对于以“/space/”开头的请求，均由 authc 过滤器处理，也就是完成身份认证操作。</span> </p> </li> 
</ul> 
<p> 还需要补充说明的是，在 permission 表中存放了所有的权限名，实际上是一个权限字符串，推荐使用“<span style="font-size:12.5px;line-height:1.5;">资源:操作”这种格式来命名，例如：product:view（查看产品权限）、product:edit（产品编辑权限）、product:delete（产品删除权限）等。</span> </p> 
<p> 这些默认的过滤器包括： </p> 
<table style="width:100%;" cellpadding="2" cellspacing="0" border="1" bordercolor="#000000"> 
 <tbody> 
  <tr> 
   <td> 过滤器名称 </td> 
   <td> 功能 </td> 
   <td> 配置项（及其默认值） </td> 
  </tr> 
  <tr> 
   <td> anon<br> </td> 
   <td> 确保未登录（匿名）的用户发送的请求才能通过 </td> 
   <td> <br> </td> 
  </tr> 
  <tr> 
   <td> authc<br> </td> 
   <td> 确保已认证的用户发送的请求才能通过（若未认证，则跳转到登录页面）<br> </td> 
   <td> authc.loginUrl = /login.jsp<br> authc.successUrl = /<br> authc.usernameParam = username<br> authc.passwordParam = password<br> authc.rememberMeParam = rememberMe<br> authc.failureKeyAttribute = shiroLoginFailure<br> </td> 
  </tr> 
  <tr> 
   <td> authcBasic<br> </td> 
   <td> 提供 Basic HTTP 认证功能（在浏览器中弹出一个登录对话框）<br> </td> 
   <td> authcBasic.applicationName = application<br> </td> 
  </tr> 
  <tr> 
   <td> logout<br> </td> 
   <td> 接收结束会话的请求 </td> 
   <td> logout.redirectUrl = /<br> </td> 
  </tr> 
  <tr> 
   <td> noSessionCreation<br> </td> 
   <td> 提供 No Session 解决方案（若有 Session 就会报错）<br> </td> 
   <td> <br> </td> 
  </tr> 
  <tr> 
   <td> perms<br> </td> 
   <td> 确保拥有特定权限的用户发送的请求才能通过 </td> 
   <td> <br> </td> 
  </tr> 
  <tr> 
   <td> port<br> </td> 
   <td> 确保特定端口的请求才能通过<br> </td> 
   <td> port = 80<br> </td> 
  </tr> 
  <tr> 
   <td> rest<br> </td> 
   <td> 提供 REST 解决方案（根据 REST URL 计算权限字符串） </td> 
   <td> <br> </td> 
  </tr> 
  <tr> 
   <td> roles<br> </td> 
   <td> 确保拥有特定角色的用户发送的请求才能通过<br> </td> 
   <td> <br> </td> 
  </tr> 
  <tr> 
   <td> ssl<br> </td> 
   <td> 确保只有 HTTPS 的请求才能通过 </td> 
   <td> <br> </td> 
  </tr> 
  <tr> 
   <td> user<br> </td> 
   <td> 确保已登录的用户发送的请求才能通过（包括：已认证或已记住） </td> 
   <td> <br> </td> 
  </tr> 
 </tbody> 
</table> 
<p> <span style="line-height:1.5;font-size:12.5px;">可以在 index.jsp（首页）中这样来判断该用户是否已游客还是已登录的用户：</span> </p> 
<div id="highlighter_382997" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_382997_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_382997" menu="false" src="/js/syntax-highlighter-2.1.382/scripts/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">&lt;%@&nbsp;page&nbsp;pageEncoding="UTF-8"&nbsp;%&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">&lt;%@&nbsp;taglib&nbsp;prefix="c"&nbsp;uri="http://java.sun.com/jsp/jstl/core"&nbsp;%&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="plain">&lt;%@&nbsp;taglib&nbsp;prefix="fmt"&nbsp;uri="http://java.sun.com/jsp/jstl/fmt"&nbsp;%&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">&lt;%@&nbsp;taglib&nbsp;prefix="shiro"&nbsp;uri="http://shiro.apache.org/tags"&nbsp;%&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">html</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">head</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">title</code><code class="plain">&gt;首页&lt;/</code><code class="keyword">title</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">head</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">body</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">h1</code><code class="plain">&gt;首页&lt;/</code><code class="keyword">h1</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">shiro:guest</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">p</code><code class="plain">&gt;身份：游客&lt;/</code><code class="keyword">p</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">a</code>&nbsp;<code class="color1">href</code><code class="plain">=</code><code class="string">"&lt;c:url&nbsp;value="</code><code class="plain">/login"/&gt;"&gt;登录&lt;/</code><code class="keyword">a</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">a</code>&nbsp;<code class="color1">href</code><code class="plain">=</code><code class="string">"&lt;c:url&nbsp;value="</code><code class="plain">/register"/&gt;"&gt;注册&lt;/</code><code class="keyword">a</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">shiro:guest</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">shiro:user</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">p</code><code class="plain">&gt;身份：&lt;</code><code class="keyword">shiro:principal</code><code class="plain">/&gt;&lt;/</code><code class="keyword">p</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">a</code>&nbsp;<code class="color1">href</code><code class="plain">=</code><code class="string">"&lt;c:url&nbsp;value="</code><code class="plain">/space"/&gt;"&gt;空间&lt;/</code><code class="keyword">a</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">a</code>&nbsp;<code class="color1">href</code><code class="plain">=</code><code class="string">"&lt;c:url&nbsp;value="</code><code class="plain">/logout"/&gt;"&gt;退出&lt;/</code><code class="keyword">a</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">shiro:user</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">body</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">html</code><code class="plain">&gt;</code></td></tr></tbody></table></div></div></div> 
<p> <span style="font-size:12.5px;line-height:1.5;">需要使用 Shiro 提供的 JSP 标签：</span> </p> 
<p> &lt;%@ taglib prefix="shiro" uri="http://shiro.apache.org/tags" %&gt; </p> 
<p> 随后就可以使用 shiro 标签的相关功能了，它们包括： </p> 
<table style="width:100%;" cellpadding="2" cellspacing="0" border="1" bordercolor="#000000"> 
 <tbody> 
  <tr> 
   <td> 标签 </td> 
   <td> 功能 </td> 
  </tr> 
  <tr> 
   <td> <span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:13px;line-height:18.75px;">&lt;shiro:guest&gt;...&lt;/shiro:guest&gt;</span> </td> 
   <td> 判断当前用户是否为游客 </td> 
  </tr> 
  <tr> 
   <td> <span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:13px;line-height:18.75px;">&lt;shiro:user&gt;...&lt;/shiro:user&gt;</span> </td> 
   <td> 判断当前用户是否已登录（包括：已认证或已记住） </td> 
  </tr> 
  <tr> 
   <td> <span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:13px;line-height:18.75px;">&lt;shiro:authenticated&gt;...&lt;/shiro:authenticated&gt;</span> </td> 
   <td> 判断当前用户是否已认证通过<span style="font-family:'sans serif', tahoma, verdana, helvetica;font-size:12px;line-height:18px;">（不包括已记住）</span> </td> 
  </tr> 
  <tr> 
   <td> <span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:13px;line-height:18.75px;">&lt;shiro:notAuthenticated&gt;...&lt;/shiro:notAuthenticated&gt;</span> </td> 
   <td> 判断当前用户是否未认证通过 </td> 
  </tr> 
  <tr> 
   <td> <span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:13px;line-height:18.75px;">&lt;shiro:principal /&gt;</span> </td> 
   <td> 获取当前用户的相关信息，例如：用户名 </td> 
  </tr> 
  <tr> 
   <td> <span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:13px;line-height:18.75px;">&lt;shiro:hasRole name="foo"&gt;...&lt;/shiro:hasRole&gt;</span> </td> 
   <td> 判断当前用户是否具有某种角色 </td> 
  </tr> 
  <tr> 
   <td> <span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:13px;line-height:18.75px;">&lt;shiro:lacksRole name="foo"&gt;...&lt;/shiro:lacksRole&gt;</span> </td> 
   <td> 判读当前用户是否缺少某种角色 </td> 
  </tr> 
  <tr> 
   <td> <span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:13px;line-height:18.75px;">&lt;shiro:hasAnyRoles name="foo, bar"&gt;...&lt; /shiro:hasAnyRoles&gt;</span> </td> 
   <td> <span style="font-family:'sans serif', tahoma, verdana, helvetica;font-size:12px;line-height:18px;">判断当前用户是否具有任意一种角色（foo 或 bar）</span><br> </td> 
  </tr> 
  <tr> 
   <td> <span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:13px;line-height:18.75px;">&lt;shiro:hasPermission name="foo"&gt;...&lt;/shiro:hasPermission&gt;</span> </td> 
   <td> 判断当前用户是否具有某种权限 </td> 
  </tr> 
  <tr> 
   <td> <span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:13px;line-height:18.75px;">&lt;shiro:lacksPermission name="foo"&gt;...&lt;/shiro:lacksPermission&gt;</span> </td> 
   <td> 判断当前用户是否缺少某种权限 </td> 
  </tr> 
 </tbody> 
</table> 
<p> <span style="font-size:12.5px;">如果 Shiro 再提供如下几个 JSP 标签那就完美了：</span> </p> 
<table style="width:100%;" cellpadding="2" cellspacing="0" border="1" bordercolor="#000000"> 
 <tbody> 
  <tr> 
   <td> 标签 </td> 
   <td> 功能 </td> 
  </tr> 
  <tr> 
   <td> &lt;shiro:hasAllRoles name="foo, bar"&gt;...&lt; /shiro:hasAllRoles&gt;<br> </td> 
   <td> 判断当前用户是否具同时具有每种角色（foo 与 bar）<br> </td> 
  </tr> 
  <tr> 
   <td> &lt;shiro:hasAnyPermission name="foo, bar"&gt;...&lt;/shiro:hasAnyPermission&gt;<br> </td> 
   <td> 判断当前用户是否具有任意一种权限（foo 或 bar）<br> </td> 
  </tr> 
  <tr> 
   <td> &lt;shiro:hasAllPermission name="foo, bar"&gt;...&lt;/shiro:hasAllPermission&gt;<br> </td> 
   <td> 判断当前用户是否具同时具有每种权限（foo 与 bar）<br> </td> 
  </tr> 
 </tbody> 
</table> 
<p> <span style="line-height:1.5;font-size:12.5px;">实现以上这些标签并不是一件困难的事情，</span><span style="font-size:12.5px;line-height:1.5;">Shiro 最迷人的地方就是扩展了，有时候我们需要看源码并“依葫芦画瓢”的，相信这一定是一件非常有趣的事情。</span> </p> 
<p> 除了 JSP 标签以外，Shiro 还为您提供了 Java 注解，只需将这些注解定义在您想要安全控制的方法上即可。 </p> 
<table style="width:100%;" cellpadding="2" cellspacing="0" border="1" bordercolor="#000000"> 
 <tbody> 
  <tr> 
   <td> 注解 </td> 
   <td> 功能 </td> 
  </tr> 
  <tr> 
   <td> RequiresGuest<br> </td> 
   <td> 确保被标注的方法可被匿名用户访问 </td> 
  </tr> 
  <tr> 
   <td> RequiresUser<br> </td> 
   <td> <span style="font-family:'sans serif', tahoma, verdana, helvetica;font-size:12px;line-height:18px;">确保被标注的方法只能被已登录的用户访问（包括：已认证或已记住）</span> </td> 
  </tr> 
  <tr> 
   <td> RequiresAuthentication<br> </td> 
   <td> <span style="font-family:'sans serif', tahoma, verdana, helvetica;font-size:12px;line-height:18px;">确保被标注的方法只能被已认证的用户访问</span>（不包括已记住）<br> </td> 
  </tr> 
  <tr> 
   <td> RequiresRoles<br> </td> 
   <td> <span style="font-family:'sans serif', tahoma, verdana, helvetica;font-size:12px;line-height:18px;">确保被标注的方法仅被指定角色的用户访问</span><br> </td> 
  </tr> 
  <tr> 
   <td> RequiresPermissions<br> </td> 
   <td> <span style="font-family:'sans serif', tahoma, verdana, helvetica;font-size:12px;line-height:18px;">确保被标注的方法仅被指定权限的用户访问</span><span style="font-family:'sans serif', tahoma, verdana, helvetica;font-size:12px;line-height:18px;"></span><br> </td> 
  </tr> 
 </tbody> 
</table> 
<p> 注意，当您使用了&nbsp;RequiresRoles 与&nbsp;RequiresPermissions 注解，也就意味着您把代码写死了，这样如果数据库里的 Role 或 Permission 更改了，您的代码也就无效了，这或许是 Shiro 的一点点不完美的地方吧，不过瑕不掩瑜了。 </p> 
<p> 每次认证与授权都需要与数据库打交道，这会对性能产生一定的开销，关于这一点 Shiro 也为我们想到了，您只需在 [main] 片段中增加如下配置即可： </p> 
<div id="highlighter_483389" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_483389_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_483389" menu="false" src="/js/syntax-highlighter-2.1.382/scripts/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">cacheManager&nbsp;=&nbsp;org.apache.shiro.cache.MemoryConstrainedCacheManager</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">securityManager.cacheManager&nbsp;=&nbsp;$cacheManager</code></td></tr></tbody></table></div></div></div> 
<p> <span style="line-height:1.5;font-size:12.5px;">此时 Shiro 就会在内存使用一个 Map 来缓存您的查询结果，从而减少了数据库的操作次数，提高了查询方面的性能。Shiro 也提供了 EhCache 的扩展，为缓存提供了更加高大上的解决方案。</span> </p> 
<p> 目前在数据库里保存的是明文的密码，这样不太安全，如何将其加密呢？Shiro 同样提供了非常优雅的解决方案，您只需在 [main] 片段下增加如下配置即可： </p> 
<div id="highlighter_967619" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_967619_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_967619" menu="false" src="/js/syntax-highlighter-2.1.382/scripts/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">passwordMatcher&nbsp;=&nbsp;org.apache.shiro.authc.credential.PasswordMatcher</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">jdbcRealm.credentialsMatcher&nbsp;=&nbsp;$passwordMatcher</code></td></tr></tbody></table></div></div></div> 
<p> 其实，Shiro 对密码的加密与解密提供了非常强大的支持，这里仅仅是一种最简单的情况。需要确保在创建密码的时候使用对应的加密算法，Shiro 给我们提供了 PasswordService 接口，您可以这样来使用： </p> 
<div id="highlighter_191742" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_191742_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_191742" menu="false" src="/js/syntax-highlighter-2.1.382/scripts/clipboard.swf"></div><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">PasswordService&nbsp;passwordService&nbsp;=&nbsp;</code><code class="keyword">new</code>&nbsp;<code class="plain">DefaultPasswordService();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">String&nbsp;encryptedPassword&nbsp;=&nbsp;passwordService.encryptPassword(plaintextPassword);</code></td></tr></tbody></table></div></div></div> 
<p> 只需将这个&nbsp;encryptedPassword 存入数据库即可。 </p> 
<p> <span style="line-height:1.5;font-size:12.5px;">其实关于 Shiro 的那点事儿还有很多，不可能通过一篇文章就能完全覆盖，后续我会继续与大家分享，包括：Shiro 架构分析，在 Shiro 中使用 EhCache，将 Shiro 与 Spring 集成，将 Shiro 与 CAS 集成，将 Shiro 与 Smart 集成，等等。</span> </p> 
<p> 本文示例代码：<a href="http://git.oschina.net/huangyong/shiro_demo" target="_blank" rel="nofollow">http://git.oschina.net/huangyong/shiro_demo</a> </p> 
<p> 欢迎阅读《Shiro 源码分析》：<a href="http://my.oschina.net/huangyong/blog/209339" target="_blank" rel="nofollow">http://my.oschina.net/huangyong/blog/209339</a> </p></div>
      	      	<div class="BlogShare">
    	
		<strong>分享到：</strong>
		<a class="share_sina" title="分享到新浪微博" href="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=858381728',u=z||d.location,p=['&url=',e(u),'&title=',e(t||d.title),'&source=',e(r),'&sourceUrl=',e(l),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,'','','','Shiro 那点事儿: 前几天我遇见了一位美女，真有种相逢恨晚的感觉。她皮肤白皙、气质优雅、楚楚动人，拥有苗条的身材，却又不失丰满之躯，正所谓“该大的地方大，该小的地方小”，她就是我...','','utf-8'));">
			<img src="/img/sinaweibo_fb1.png" height="29">
		</a>
		<a class="share_qq" title="分享到腾讯微博" href="javascript:(function(){window.open('http://v.t.qq.com/share/share.php?url='+encodeURIComponent(document.location)+'&appkey=96f54f97c4de46e393c4835a266207f4&site=&title='+encodeURIComponent(document.title)+encodeURIComponent(': 前几天我遇见了一位美女，真有种相逢恨晚的感觉。她皮肤白皙、气质优雅、楚楚动人，拥有苗条的身材，却又不失丰满之躯，正所谓“该大的地方大，该小的地方小”，她就是我...'),'', 'width=450, height=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no');}())">
			<img src="/img/tencent_weibo_fb.jpg" height="30">
		</a>
    	<span class="BlogVote" onclick="vote(208783)" title="都有15个人赞过了，你也来赞一下吧！不会扣积分哦！">
			<span class="num vote_count">15</span><span class="vote">赞</span>
		</span>
	</div>
      
      <div class="BlogCopyright">		
	  		声明：OSCHINA 博客文章版权属于作者，受法律保护。未经作者同意不得转载。
	  	  </div>
	  	  
      <div class="BlogLinks">
    	<ul>
                <li class="prev"><a href="http://my.oschina.net/huangyong/blog/202671" title="上一篇：我的 Fiverr 初体验">« 上一篇</a></li>        <li class="next"><a href="http://my.oschina.net/huangyong/blog/209339" title="下一篇：Shiro 之 入口：EnvironmentLoaderListener">下一篇 »</a></li>    	</ul>
				<p style="margin:10px 0 0 0;font-weight:bold;color:#A00;text-decoration:none;">开源中国-程序员在线工具：<a href="http://www.ostools.net/apidocs" style="text-decoration:none;">API文档大全(120+)</a> <a href="http://runjs.cn" style="text-decoration:none;" target="_blank">JS在线编辑演示</a> <a href="http://www.ostools.net/qr" style="text-decoration:none;" target="_blank">二维码</a>  <a href="http://www.ostools.net" style="text-decoration:none;" target="_blank">更多&gt;&gt;</a>
		      </p></div>
	</div>
	
	
		       <div style="margin:10px 0;">
    	<script type="text/javascript" src="/js/ad/blog.js?date=20140301"></script><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- news-side -->
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-1307862221338762" data-ad-slot="4302558928" data-adsbygoogle-status="done"><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><iframe width="728" height="90" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

      </div>
      </div>
<!-------------------------------------------------------->
<script type="text/javascript">
    angular.module('blogComment', ['ngSanitize'])
    .controller('ListComment', 
    function($scope, $http,$filter){
            var url = "/action/blog/listComment?blog=208783&page=1&size=10";
            $http({method: 'GET', url: url}).success(function(data) {$scope.commentjsons = data;});
            $scope.totalComment = 32;
            $scope.currentPage=1;
            $scope.pageSize=10;
            $scope.totalPage=Math.ceil($scope.totalComment/$scope.pageSize);
            if($scope.currentPage>3){
            	$scope.beginIndex = $scope.currentPage - 3;
            }else{
            	$scope.beginIndex = 1;
            }
            $scope.endIndex = $scope.beginIndex + 9;
            if($scope.endIndex>$scope.totalPage){
            	$scope.endIndex = $scope.totalPage;
            }
			var pages = new Array();
			var index=0;
			for(var i=$scope.beginIndex;i<=$scope.endIndex;i++){
				pages[index]=i;
				index++;
			}
			$scope.pages = pages;
        $scope.delete_c = function(nid,uid,cid){
        	delete_c(nid,uid,cid);
        };
        	$scope.ReplyInline = function(blog,user,relpy){
        ReplyInline(blog,user,relpy);
        };
	});
</script>
<div class="SpaceList ng-scope" style="margin-top:20px;" ng-app="blogComment" ng-controller="ListComment">
<div class="BlogComments">
  <h2><a name="comments"></a>评论<em ng-bind="totalComment" class="ng-binding">32</em></h2>
  <ul id="BlogComments">
      <!-- ngRepeat: commentjson in commentjsons --><li ng-repeat="commentjson in commentjsons" id="cmt_208783_855977_279003239" ng-class="{'even': 1 == 0}" class="ng-scope">
	<table class="ostable">
	<tbody><tr>
    	<td class="portrait">
    		<a ng-href="http://my.oschina.net/u/855977" target="_blank" href="http://my.oschina.net/u/855977">
				<img ng-src="http://static.oschina.net/uploads/user/427/855977_50.jpg?t=1374378123000" align="absmiddle" alt="王爵1" title="王爵1" class="SmallPortrait" user="855977" src="http://static.oschina.net/uploads/user/427/855977_50.jpg?t=1374378123000">
			</a>
    	</td>
    	<td class="body">
    		<div class="title">
    			<span ng-bind="1" class="ng-binding">1</span>楼：<a ng-href="http://my.oschina.net/u/855977" target="_blank" name="208783" class="user ng-binding" ng-bind="commentjson.userName" href="http://my.oschina.net/u/855977">王爵1</a>
				<!-- ngIf: (commentjson.client_type>10000 && commentjson.appApproved) -->
				<span ng-switch="3">
					<!-- ngIf: (commentjson.client_type==2) -->
					<!-- ngIf: (commentjson.client_type==3) --><span ng-if="(commentjson.client_type==3)" "="" class="ng-scope">Android</span><!-- end ngIf: (commentjson.client_type==3) -->
					<!-- ngIf: (commentjson.client_type==4) -->
					<!-- ngIf: (commentjson.client_type==5) -->
					<!-- ngIf: (commentjson.client_type==6) -->
				</span>
				发表于 <span ng-bind="commentjson.create_time" class="ng-binding">2014-03-17 08:29</span>
				  <!-- ngIf: commentjson.canAdmin -->
    			  <!-- ngIf: commentjson.canCommit --><a href="" ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canCommit" class="ng-scope">回复此评论</a><!-- end ngIf: commentjson.canCommit -->
    		</div>
    		<div class="post ng-binding" ng-bind-html="commentjson.content">不错的文章 </div>
    		<div id="inline_reply_of_208783_855977_279003239" class="inline_reply"></div>
        </td>
	</tr>
	</tbody></table>
</li><!-- end ngRepeat: commentjson in commentjsons --><li ng-repeat="commentjson in commentjsons" id="cmt_208783_927446_279003255" ng-class="{'even': 0 == 0}" class="ng-scope even">
	<table class="ostable">
	<tbody><tr>
    	<td class="portrait">
    		<a ng-href="http://my.oschina.net/u/927446" target="_blank" href="http://my.oschina.net/u/927446">
				<img ng-src="http://static.oschina.net/uploads/user/463/927446_50.jpg?t=1392347638000" align="absmiddle" alt="Dead_knight" title="Dead_knight" class="SmallPortrait" user="927446" src="http://static.oschina.net/uploads/user/463/927446_50.jpg?t=1392347638000">
			</a>
    	</td>
    	<td class="body">
    		<div class="title">
    			<span ng-bind="2" class="ng-binding">2</span>楼：<a ng-href="http://my.oschina.net/u/927446" target="_blank" name="208783" class="user ng-binding" ng-bind="commentjson.userName" href="http://my.oschina.net/u/927446">Dead_knight</a>
				<!-- ngIf: (commentjson.client_type>10000 && commentjson.appApproved) -->
				<span ng-switch="0">
					<!-- ngIf: (commentjson.client_type==2) -->
					<!-- ngIf: (commentjson.client_type==3) -->
					<!-- ngIf: (commentjson.client_type==4) -->
					<!-- ngIf: (commentjson.client_type==5) -->
					<!-- ngIf: (commentjson.client_type==6) -->
				</span>
				发表于 <span ng-bind="commentjson.create_time" class="ng-binding">2014-03-17 08:31</span>
				  <!-- ngIf: commentjson.canAdmin -->
    			  <!-- ngIf: commentjson.canCommit --><a href="" ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canCommit" class="ng-scope">回复此评论</a><!-- end ngIf: commentjson.canCommit -->
    		</div>
    		<div class="post ng-binding" ng-bind-html="commentjson.content">自从遇见了shiro，我就抛弃了丰满的spring security。。。看来口味是随着年龄有变化的</div>
    		<div id="inline_reply_of_208783_927446_279003255" class="inline_reply"></div>
        </td>
	</tr>
	</tbody></table>
</li><!-- end ngRepeat: commentjson in commentjsons --><li ng-repeat="commentjson in commentjsons" id="cmt_208783_615783_279003581" ng-class="{'even': 1 == 0}" class="ng-scope">
	<table class="ostable">
	<tbody><tr>
    	<td class="portrait">
    		<a ng-href="http://my.oschina.net/u/615783" target="_blank" href="http://my.oschina.net/u/615783">
				<img ng-src="http://static.oschina.net/uploads/user/307/615783_50.jpg?t=1373384849000" align="absmiddle" alt="WeirdBird" title="WeirdBird" class="SmallPortrait" user="615783" src="http://static.oschina.net/uploads/user/307/615783_50.jpg?t=1373384849000">
			</a>
    	</td>
    	<td class="body">
    		<div class="title">
    			<span ng-bind="3" class="ng-binding">3</span>楼：<a ng-href="http://my.oschina.net/u/615783" target="_blank" name="208783" class="user ng-binding" ng-bind="commentjson.userName" href="http://my.oschina.net/u/615783">WeirdBird</a>
				<!-- ngIf: (commentjson.client_type>10000 && commentjson.appApproved) -->
				<span ng-switch="0">
					<!-- ngIf: (commentjson.client_type==2) -->
					<!-- ngIf: (commentjson.client_type==3) -->
					<!-- ngIf: (commentjson.client_type==4) -->
					<!-- ngIf: (commentjson.client_type==5) -->
					<!-- ngIf: (commentjson.client_type==6) -->
				</span>
				发表于 <span ng-bind="commentjson.create_time" class="ng-binding">2014-03-17 08:58</span>
				  <!-- ngIf: commentjson.canAdmin -->
    			  <!-- ngIf: commentjson.canCommit --><a href="" ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canCommit" class="ng-scope">回复此评论</a><!-- end ngIf: commentjson.canCommit -->
    		</div>
    		<div class="post ng-binding" ng-bind-html="commentjson.content">前几天我遇见了一位美女，真有种相逢恨晚的感觉。她皮肤白皙、气质优雅、楚楚动人，拥有苗条的身材</div>
    		<div id="inline_reply_of_208783_615783_279003581" class="inline_reply"></div>
        </td>
	</tr>
	</tbody></table>
</li><!-- end ngRepeat: commentjson in commentjsons --><li ng-repeat="commentjson in commentjsons" id="cmt_208783_252955_279003784" ng-class="{'even': 0 == 0}" class="ng-scope even">
	<table class="ostable">
	<tbody><tr>
    	<td class="portrait">
    		<a ng-href="http://my.oschina.net/u/252955" target="_blank" href="http://my.oschina.net/u/252955">
				<img ng-src="http://static.oschina.net/uploads/user/126/252955_50.jpg?t=1384564859000" align="absmiddle" alt="我要吃螃蟹" title="我要吃螃蟹" class="SmallPortrait" user="252955" src="http://static.oschina.net/uploads/user/126/252955_50.jpg?t=1384564859000">
			</a>
    	</td>
    	<td class="body">
    		<div class="title">
    			<span ng-bind="4" class="ng-binding">4</span>楼：<a ng-href="http://my.oschina.net/u/252955" target="_blank" name="208783" class="user ng-binding" ng-bind="commentjson.userName" href="http://my.oschina.net/u/252955">我要吃螃蟹</a>
				<!-- ngIf: (commentjson.client_type>10000 && commentjson.appApproved) -->
				<span ng-switch="0">
					<!-- ngIf: (commentjson.client_type==2) -->
					<!-- ngIf: (commentjson.client_type==3) -->
					<!-- ngIf: (commentjson.client_type==4) -->
					<!-- ngIf: (commentjson.client_type==5) -->
					<!-- ngIf: (commentjson.client_type==6) -->
				</span>
				发表于 <span ng-bind="commentjson.create_time" class="ng-binding">2014-03-17 09:15</span>
				  <!-- ngIf: commentjson.canAdmin -->
    			  <!-- ngIf: commentjson.canCommit --><a href="" ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canCommit" class="ng-scope">回复此评论</a><!-- end ngIf: commentjson.canCommit -->
    		</div>
    		<div class="post ng-binding" ng-bind-html="commentjson.content"><img src="/js/ke/plugins/emoticons/79.gif" alt="79"></div>
    		<div id="inline_reply_of_208783_252955_279003784" class="inline_reply"></div>
        </td>
	</tr>
	</tbody></table>
</li><!-- end ngRepeat: commentjson in commentjsons --><li ng-repeat="commentjson in commentjsons" id="cmt_208783_1173267_279003895" ng-class="{'even': 1 == 0}" class="ng-scope">
	<table class="ostable">
	<tbody><tr>
    	<td class="portrait">
    		<a ng-href="http://my.oschina.net/u/1173267" target="_blank" href="http://my.oschina.net/u/1173267">
				<img ng-src="http://static.oschina.net/uploads/user/586/1173267_50.png?t=1395026835000" align="absmiddle" alt="TimZhou" title="TimZhou" class="SmallPortrait" user="1173267" src="http://static.oschina.net/uploads/user/586/1173267_50.png?t=1395026835000">
			</a>
    	</td>
    	<td class="body">
    		<div class="title">
    			<span ng-bind="5" class="ng-binding">5</span>楼：<a ng-href="http://my.oschina.net/u/1173267" target="_blank" name="208783" class="user ng-binding" ng-bind="commentjson.userName" href="http://my.oschina.net/u/1173267">TimZhou</a>
				<!-- ngIf: (commentjson.client_type>10000 && commentjson.appApproved) -->
				<span ng-switch="0">
					<!-- ngIf: (commentjson.client_type==2) -->
					<!-- ngIf: (commentjson.client_type==3) -->
					<!-- ngIf: (commentjson.client_type==4) -->
					<!-- ngIf: (commentjson.client_type==5) -->
					<!-- ngIf: (commentjson.client_type==6) -->
				</span>
				发表于 <span ng-bind="commentjson.create_time" class="ng-binding">2014-03-17 09:24</span>
				  <!-- ngIf: commentjson.canAdmin -->
    			  <!-- ngIf: commentjson.canCommit --><a href="" ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canCommit" class="ng-scope">回复此评论</a><!-- end ngIf: commentjson.canCommit -->
    		</div>
    		<div class="post ng-binding" ng-bind-html="commentjson.content">看了一下发表的时间，我 顿时知道大神是怎么样练成的。。。。。</div>
    		<div id="inline_reply_of_208783_1173267_279003895" class="inline_reply"></div>
        </td>
	</tr>
	</tbody></table>
</li><!-- end ngRepeat: commentjson in commentjsons --><li ng-repeat="commentjson in commentjsons" id="cmt_208783_2795_279004565" ng-class="{'even': 0 == 0}" class="ng-scope even">
	<table class="ostable">
	<tbody><tr>
    	<td class="portrait">
    		<a ng-href="http://my.oschina.net/u/2795" target="_blank" href="http://my.oschina.net/u/2795">
				<img ng-src="http://static.oschina.net/uploads/user/1/2795_50.jpg?t=1370252207000" align="absmiddle" alt="东门吹风" title="东门吹风" class="SmallPortrait" user="2795" src="http://static.oschina.net/uploads/user/1/2795_50.jpg?t=1370252207000">
			</a>
    	</td>
    	<td class="body">
    		<div class="title">
    			<span ng-bind="6" class="ng-binding">6</span>楼：<a ng-href="http://my.oschina.net/u/2795" target="_blank" name="208783" class="user ng-binding" ng-bind="commentjson.userName" href="http://my.oschina.net/u/2795">东门吹风</a>
				<!-- ngIf: (commentjson.client_type>10000 && commentjson.appApproved) -->
				<span ng-switch="0">
					<!-- ngIf: (commentjson.client_type==2) -->
					<!-- ngIf: (commentjson.client_type==3) -->
					<!-- ngIf: (commentjson.client_type==4) -->
					<!-- ngIf: (commentjson.client_type==5) -->
					<!-- ngIf: (commentjson.client_type==6) -->
				</span>
				发表于 <span ng-bind="commentjson.create_time" class="ng-binding">2014-03-17 10:20</span>
				  <!-- ngIf: commentjson.canAdmin -->
    			  <!-- ngIf: commentjson.canCommit --><a href="" ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canCommit" class="ng-scope">回复此评论</a><!-- end ngIf: commentjson.canCommit -->
    		</div>
    		<div class="post ng-binding" ng-bind-html="commentjson.content">敢情博主以前是写H文的吧 <img src="/js/ke/plugins/emoticons/28.gif" alt="28"> </div>
    		<div id="inline_reply_of_208783_2795_279004565" class="inline_reply"></div>
        </td>
	</tr>
	</tbody></table>
</li><!-- end ngRepeat: commentjson in commentjsons --><li ng-repeat="commentjson in commentjsons" id="cmt_208783_199201_279005015" ng-class="{'even': 1 == 0}" class="ng-scope">
	<table class="ostable">
	<tbody><tr>
    	<td class="portrait">
    		<a ng-href="http://my.oschina.net/u/199201" target="_blank" href="http://my.oschina.net/u/199201">
				<img ng-src="http://static.oschina.net/uploads/user/99/199201_50.jpeg?t=1401009056000" align="absmiddle" alt="大漠真人" title="大漠真人" class="SmallPortrait" user="199201" src="http://static.oschina.net/uploads/user/99/199201_50.jpeg?t=1401009056000">
			</a>
    	</td>
    	<td class="body">
    		<div class="title">
    			<span ng-bind="7" class="ng-binding">7</span>楼：<a ng-href="http://my.oschina.net/u/199201" target="_blank" name="208783" class="user ng-binding" ng-bind="commentjson.userName" href="http://my.oschina.net/u/199201">大漠真人</a>
				<!-- ngIf: (commentjson.client_type>10000 && commentjson.appApproved) -->
				<span ng-switch="0">
					<!-- ngIf: (commentjson.client_type==2) -->
					<!-- ngIf: (commentjson.client_type==3) -->
					<!-- ngIf: (commentjson.client_type==4) -->
					<!-- ngIf: (commentjson.client_type==5) -->
					<!-- ngIf: (commentjson.client_type==6) -->
				</span>
				发表于 <span ng-bind="commentjson.create_time" class="ng-binding">2014-03-17 10:57</span>
				  <!-- ngIf: commentjson.canAdmin -->
    			  <!-- ngIf: commentjson.canCommit --><a href="" ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canCommit" class="ng-scope">回复此评论</a><!-- end ngIf: commentjson.canCommit -->
    		</div>
    		<div class="post ng-binding" ng-bind-html="commentjson.content">+1;</div>
    		<div id="inline_reply_of_208783_199201_279005015" class="inline_reply"></div>
        </td>
	</tr>
	</tbody></table>
</li><!-- end ngRepeat: commentjson in commentjsons --><li ng-repeat="commentjson in commentjsons" id="cmt_208783_199201_279005019" ng-class="{'even': 0 == 0}" class="ng-scope even">
	<table class="ostable">
	<tbody><tr>
    	<td class="portrait">
    		<a ng-href="http://my.oschina.net/u/199201" target="_blank" href="http://my.oschina.net/u/199201">
				<img ng-src="http://static.oschina.net/uploads/user/99/199201_50.jpeg?t=1401009056000" align="absmiddle" alt="大漠真人" title="大漠真人" class="SmallPortrait" user="199201" src="http://static.oschina.net/uploads/user/99/199201_50.jpeg?t=1401009056000">
			</a>
    	</td>
    	<td class="body">
    		<div class="title">
    			<span ng-bind="8" class="ng-binding">8</span>楼：<a ng-href="http://my.oschina.net/u/199201" target="_blank" name="208783" class="user ng-binding" ng-bind="commentjson.userName" href="http://my.oschina.net/u/199201">大漠真人</a>
				<!-- ngIf: (commentjson.client_type>10000 && commentjson.appApproved) -->
				<span ng-switch="0">
					<!-- ngIf: (commentjson.client_type==2) -->
					<!-- ngIf: (commentjson.client_type==3) -->
					<!-- ngIf: (commentjson.client_type==4) -->
					<!-- ngIf: (commentjson.client_type==5) -->
					<!-- ngIf: (commentjson.client_type==6) -->
				</span>
				发表于 <span ng-bind="commentjson.create_time" class="ng-binding">2014-03-17 10:58</span>
				  <!-- ngIf: commentjson.canAdmin -->
    			  <!-- ngIf: commentjson.canCommit --><a href="" ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canCommit" class="ng-scope">回复此评论</a><!-- end ngIf: commentjson.canCommit -->
    		</div>
    		<div class="post ng-binding" ng-bind-html="commentjson.content"><div class="ref"><h4>引用来自“东门吹风”的评论</h4><p>敢情博主以前是写H文的吧 <img src="/js/ke/plugins/emoticons/28.gif" alt="28"> </p></div>不解风情<img src="/js/ke/plugins/emoticons/20.gif" alt="20"></div>
    		<div id="inline_reply_of_208783_199201_279005019" class="inline_reply"></div>
        </td>
	</tr>
	</tbody></table>
</li><!-- end ngRepeat: commentjson in commentjsons --><li ng-repeat="commentjson in commentjsons" id="cmt_208783_100576_279005153" ng-class="{'even': 1 == 0}" class="ng-scope">
	<table class="ostable">
	<tbody><tr>
    	<td class="portrait">
    		<a ng-href="http://my.oschina.net/u/100576" target="_blank" href="http://my.oschina.net/u/100576">
				<img ng-src="http://static.oschina.net/uploads/user/50/100576_50.jpg?t=1386324715000" align="absmiddle" alt="管梨员" title="管梨员" class="SmallPortrait" user="100576" src="http://static.oschina.net/uploads/user/50/100576_50.jpg?t=1386324715000">
			</a>
    	</td>
    	<td class="body">
    		<div class="title">
    			<span ng-bind="9" class="ng-binding">9</span>楼：<a ng-href="http://my.oschina.net/u/100576" target="_blank" name="208783" class="user ng-binding" ng-bind="commentjson.userName" href="http://my.oschina.net/u/100576">管梨员</a>
				<!-- ngIf: (commentjson.client_type>10000 && commentjson.appApproved) -->
				<span ng-switch="0">
					<!-- ngIf: (commentjson.client_type==2) -->
					<!-- ngIf: (commentjson.client_type==3) -->
					<!-- ngIf: (commentjson.client_type==4) -->
					<!-- ngIf: (commentjson.client_type==5) -->
					<!-- ngIf: (commentjson.client_type==6) -->
				</span>
				发表于 <span ng-bind="commentjson.create_time" class="ng-binding">2014-03-17 11:09</span>
				  <!-- ngIf: commentjson.canAdmin -->
    			  <!-- ngIf: commentjson.canCommit --><a href="" ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canCommit" class="ng-scope">回复此评论</a><!-- end ngIf: commentjson.canCommit -->
    		</div>
    		<div class="post ng-binding" ng-bind-html="commentjson.content"> Shiro / Spring Security 都不太懂，虽然也曾经想学习一下。  <br>我们现在的权限是这样的：<br>user / role / permission</div>
    		<div id="inline_reply_of_208783_100576_279005153" class="inline_reply"></div>
        </td>
	</tr>
	</tbody></table>
</li><!-- end ngRepeat: commentjson in commentjsons --><li ng-repeat="commentjson in commentjsons" id="cmt_208783_100576_279005195" ng-class="{'even': 0 == 0}" class="ng-scope even">
	<table class="ostable">
	<tbody><tr>
    	<td class="portrait">
    		<a ng-href="http://my.oschina.net/u/100576" target="_blank" href="http://my.oschina.net/u/100576">
				<img ng-src="http://static.oschina.net/uploads/user/50/100576_50.jpg?t=1386324715000" align="absmiddle" alt="管梨员" title="管梨员" class="SmallPortrait" user="100576" src="http://static.oschina.net/uploads/user/50/100576_50.jpg?t=1386324715000">
			</a>
    	</td>
    	<td class="body">
    		<div class="title">
    			<span ng-bind="10" class="ng-binding">10</span>楼：<a ng-href="http://my.oschina.net/u/100576" target="_blank" name="208783" class="user ng-binding" ng-bind="commentjson.userName" href="http://my.oschina.net/u/100576">管梨员</a>
				<!-- ngIf: (commentjson.client_type>10000 && commentjson.appApproved) -->
				<span ng-switch="0">
					<!-- ngIf: (commentjson.client_type==2) -->
					<!-- ngIf: (commentjson.client_type==3) -->
					<!-- ngIf: (commentjson.client_type==4) -->
					<!-- ngIf: (commentjson.client_type==5) -->
					<!-- ngIf: (commentjson.client_type==6) -->
				</span>
				发表于 <span ng-bind="commentjson.create_time" class="ng-binding">2014-03-17 11:12</span>
				  <!-- ngIf: commentjson.canAdmin -->
    			  <!-- ngIf: commentjson.canCommit --><a href="" ng-click="ReplyInline(commentjson.blogId, commentjson.userId, commentjson.commentId)" ng-if="commentjson.canCommit" class="ng-scope">回复此评论</a><!-- end ngIf: commentjson.canCommit -->
    		</div>
    		<div class="post ng-binding" ng-bind-html="commentjson.content">不要意思，按错键了，补上<br>授权的对象: user / usergroup / department / alluser<br>权限： 操作权限 / 数据权限 （针对某个数据的操作权限）, 而且所有权限都有时间的维度。<br><br>用这个 shiro 好扩展吗？<br><br></div>
    		<div id="inline_reply_of_208783_100576_279005195" class="inline_reply"></div>
        </td>
	</tr>
	</tbody></table>
</li><!-- end ngRepeat: commentjson in commentjsons -->  </ul>
</div>
<ul class="pager">
<!-- ngIf: (currentPage>1) --><!-- ngIf: (beginIndex>1) --><!-- ngRepeat: page in pages --><!-- ngIf: totalPage>1 --><li class="page ng-scope current" ng-if="totalPage>1" ng-class="{current:true}" ng-repeat="page in pages"><a href="?p=1#comments" ng-bind="page" class="ng-binding">1</a></li><!-- end ngIf: totalPage>1 --><!-- end ngRepeat: page in pages --><!-- ngIf: totalPage>1 --><li class="page ng-scope" ng-if="totalPage>1" ng-class="{current:false}" ng-repeat="page in pages"><a href="?p=2#comments" ng-bind="page" class="ng-binding">2</a></li><!-- end ngIf: totalPage>1 --><!-- end ngRepeat: page in pages --><!-- ngIf: totalPage>1 --><li class="page ng-scope" ng-if="totalPage>1" ng-class="{current:false}" ng-repeat="page in pages"><a href="?p=3#comments" ng-bind="page" class="ng-binding">3</a></li><!-- end ngIf: totalPage>1 --><!-- end ngRepeat: page in pages --><!-- ngIf: totalPage>1 --><li class="page ng-scope" ng-if="totalPage>1" ng-class="{current:false}" ng-repeat="page in pages"><a href="?p=4#comments" ng-bind="page" class="ng-binding">4</a></li><!-- end ngIf: totalPage>1 --><!-- end ngRepeat: page in pages --><!-- ngIf: (endIndex<totalPage --><!-- ngIf: (currentPage<totalPage) --><li class="page next ng-scope" ng-if="(currentPage<totalPage)"><a href="?p=2#comments">&gt;</a></li><!-- end ngIf: (currentPage<totalPage) --></ul>
</div>
<!-------------------------------------------------------->


<div id="inline_reply_editor" style="display:none;">
<div class="BlogCommentForm">
	<form id="form_inline_comment" action="/action/blog/add_comment?blog=208783" method="POST">
	  <input type="hidden" id="inline_reply_id" name="reply_id" value="">          
      <textarea name="content" id="ccom_content" style="width:650px;height:60px;" onkeydown="if((event.metaKey || event.ctrlKey)&amp;&amp;event.keyCode==13){$('#form_inline_comment').submit();}"></textarea><br>
	  <p>
		  <span style="float:right;">
    	  <input type="button" value="关闭" class="blg_submit_btn" id="btn_close_inline_reply" style="background: rgba(255,255,255,0);color: #555;">
    	  <input type="submit" value="回复" id="btn_comment" class="blg_submit_btn"> 
		  </span>
		  插入：
				<a href="javascript:;" onclick="javascript:insert_emotions('ccom_content',this);" class="blog_emotion">表情</a>
				<a href="javascript:insert_projects_c();" class="blog_soft">开源软件</a>
		 <span class="NoData" id="ficmp_msg" style="color:#F00"></span>
	  </p>
    </form>
</div>
</div>

<div class="SpaceList" style="margin-top:20px;">
  <a name="comments" id="postform"></a>
      <div class="BlogCommentForm">
        <form id="form_comment" action="/action/blog/add_comment?blog=208783" method="POST">
        	<div class="comment_portrait">
        		<img src="/img/portrait.gif" align="absmiddle" alt="黄勇" title="黄勇" class="LargePortrait">        	</div>
        	<div class="comment_form">
        		<textarea name="content" id="wmd-input" style="width:650px;height:80px;" placeholder=""></textarea>
				<p>
					<button type="submit" class="blg_submit_btn" style="float:right;">发表评论</button>
					插入：
					<a href="javascript:insert_emotions();" class="blog_emotion">表情</a>
					<a href="javascript:insert_projects();" class="blog_soft">开源软件</a>
					<span class="NoData" id="cmt_tip"></span>
				</p>
				<div id="TweetFormPopupWraper">
					<div id="TweetFormPopupArrow">
        				<div id="TweetFormPopup">
                        	<div id="TweetEmotions">
                            	<div class="TweetPopupTitle"><a href="javascript:;" onclick="$('#TweetFormPopupWraper').hide();return false;">关闭</a>插入表情</div>
                            	                            	<a href="javascript:;" onclick="return ins_e(0);" class="emotion" style="background-position: -0px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(1);" class="emotion" style="background-position: -24px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(2);" class="emotion" style="background-position: -48px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(3);" class="emotion" style="background-position: -72px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(4);" class="emotion" style="background-position: -96px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(5);" class="emotion" style="background-position: -120px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(6);" class="emotion" style="background-position: -144px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(7);" class="emotion" style="background-position: -168px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(8);" class="emotion" style="background-position: -192px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(9);" class="emotion" style="background-position: -216px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(10);" class="emotion" style="background-position: -240px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(11);" class="emotion" style="background-position: -264px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(12);" class="emotion" style="background-position: -288px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(13);" class="emotion" style="background-position: -312px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(14);" class="emotion" style="background-position: -336px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(15);" class="emotion" style="background-position: -360px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(16);" class="emotion" style="background-position: -384px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(17);" class="emotion" style="background-position: -408px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(18);" class="emotion" style="background-position: -432px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(19);" class="emotion" style="background-position: -456px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(20);" class="emotion" style="background-position: -480px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(21);" class="emotion" style="background-position: -504px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(22);" class="emotion" style="background-position: -528px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(23);" class="emotion" style="background-position: -552px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(24);" class="emotion" style="background-position: -576px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(25);" class="emotion" style="background-position: -600px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(26);" class="emotion" style="background-position: -624px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(27);" class="emotion" style="background-position: -648px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(28);" class="emotion" style="background-position: -672px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(29);" class="emotion" style="background-position: -696px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(30);" class="emotion" style="background-position: -720px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(31);" class="emotion" style="background-position: -744px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(32);" class="emotion" style="background-position: -768px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(33);" class="emotion" style="background-position: -792px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(34);" class="emotion" style="background-position: -816px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(35);" class="emotion" style="background-position: -840px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(36);" class="emotion" style="background-position: -864px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(37);" class="emotion" style="background-position: -888px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(38);" class="emotion" style="background-position: -912px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(39);" class="emotion" style="background-position: -936px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(40);" class="emotion" style="background-position: -960px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(41);" class="emotion" style="background-position: -984px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(42);" class="emotion" style="background-position: -1008px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(43);" class="emotion" style="background-position: -1032px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(44);" class="emotion" style="background-position: -1056px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(45);" class="emotion" style="background-position: -1080px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(46);" class="emotion" style="background-position: -1104px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(47);" class="emotion" style="background-position: -1128px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(48);" class="emotion" style="background-position: -1152px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(49);" class="emotion" style="background-position: -1176px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(50);" class="emotion" style="background-position: -1200px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(51);" class="emotion" style="background-position: -1224px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(52);" class="emotion" style="background-position: -1248px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(53);" class="emotion" style="background-position: -1272px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(54);" class="emotion" style="background-position: -1296px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(55);" class="emotion" style="background-position: -1320px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(56);" class="emotion" style="background-position: -1344px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(57);" class="emotion" style="background-position: -1368px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(58);" class="emotion" style="background-position: -1392px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(59);" class="emotion" style="background-position: -1416px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(60);" class="emotion" style="background-position: -1440px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(61);" class="emotion" style="background-position: -1464px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(62);" class="emotion" style="background-position: -1488px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(63);" class="emotion" style="background-position: -1512px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(64);" class="emotion" style="background-position: -1536px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(65);" class="emotion" style="background-position: -1560px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(66);" class="emotion" style="background-position: -1584px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(67);" class="emotion" style="background-position: -1608px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(68);" class="emotion" style="background-position: -1632px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(69);" class="emotion" style="background-position: -1656px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(70);" class="emotion" style="background-position: -1680px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(71);" class="emotion" style="background-position: -1704px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(72);" class="emotion" style="background-position: -1728px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(73);" class="emotion" style="background-position: -1752px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(74);" class="emotion" style="background-position: -1776px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(75);" class="emotion" style="background-position: -1800px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(76);" class="emotion" style="background-position: -1824px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(77);" class="emotion" style="background-position: -1848px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(78);" class="emotion" style="background-position: -1872px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(79);" class="emotion" style="background-position: -1896px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(80);" class="emotion" style="background-position: -1920px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(81);" class="emotion" style="background-position: -1944px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(82);" class="emotion" style="background-position: -1968px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(83);" class="emotion" style="background-position: -1992px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(84);" class="emotion" style="background-position: -2016px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(85);" class="emotion" style="background-position: -2040px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(86);" class="emotion" style="background-position: -2064px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(87);" class="emotion" style="background-position: -2088px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(88);" class="emotion" style="background-position: -2112px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(89);" class="emotion" style="background-position: -2136px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(90);" class="emotion" style="background-position: -2160px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(91);" class="emotion" style="background-position: -2184px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(92);" class="emotion" style="background-position: -2208px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(93);" class="emotion" style="background-position: -2232px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(94);" class="emotion" style="background-position: -2256px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(95);" class="emotion" style="background-position: -2280px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(96);" class="emotion" style="background-position: -2304px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(97);" class="emotion" style="background-position: -2328px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(98);" class="emotion" style="background-position: -2352px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(99);" class="emotion" style="background-position: -2376px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(100);" class="emotion" style="background-position: -2400px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(101);" class="emotion" style="background-position: -2424px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(102);" class="emotion" style="background-position: -2448px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(103);" class="emotion" style="background-position: -2472px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(104);" class="emotion" style="background-position: -2496px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(105);" class="emotion" style="background-position: -2520px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(106);" class="emotion" style="background-position: -2544px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(107);" class="emotion" style="background-position: -2568px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(108);" class="emotion" style="background-position: -2592px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(109);" class="emotion" style="background-position: -2616px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(110);" class="emotion" style="background-position: -2640px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(111);" class="emotion" style="background-position: -2664px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(112);" class="emotion" style="background-position: -2688px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(113);" class="emotion" style="background-position: -2712px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(114);" class="emotion" style="background-position: -2736px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(115);" class="emotion" style="background-position: -2760px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(116);" class="emotion" style="background-position: -2784px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(117);" class="emotion" style="background-position: -2808px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(118);" class="emotion" style="background-position: -2832px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(119);" class="emotion" style="background-position: -2856px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(120);" class="emotion" style="background-position: -2880px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(121);" class="emotion" style="background-position: -2904px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(122);" class="emotion" style="background-position: -2928px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(123);" class="emotion" style="background-position: -2952px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(124);" class="emotion" style="background-position: -2976px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(125);" class="emotion" style="background-position: -3000px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(126);" class="emotion" style="background-position: -3024px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(127);" class="emotion" style="background-position: -3048px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(128);" class="emotion" style="background-position: -3072px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(129);" class="emotion" style="background-position: -3096px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(130);" class="emotion" style="background-position: -3120px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(131);" class="emotion" style="background-position: -3144px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(132);" class="emotion" style="background-position: -3168px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(133);" class="emotion" style="background-position: -3192px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(134);" class="emotion" style="background-position: -3216px 0px;"></a>
                            	                            	<div class="clear"></div>
                        	</div>
        				</div>
					</div>
				</div>
            </div>
        </form>
    </div>
  </div>
	
<div id="RelativeBlogs" style="right: -400px;">
	<strong><a id="btn_close">关闭</a>相关文章阅读</strong>
	<ul>
			<li>
		<span class="date">2013/09/15</span>
		<a href="http://my.oschina.net/huangyong/blog/161419" title="Java 那点事儿">Java 那点事儿</a>
	</li>
				<li>
		<span class="date">2012/08/13</span>
		<a href="http://my.oschina.net/u/661028/blog/72580" title="shiro不跳转successUrl的问题">shiro不跳转successUrl的问题...</a>
	</li>
				<li>
		<span class="date">2014/02/09</span>
		<a href="http://my.oschina.net/heroShane/blog/198057" title="让Apache Shiro保护你的应用">让Apache Shiro保护你的应用...</a>
	</li>
				<li>
		<span class="date">2014/03/18</span>
		<a href="http://my.oschina.net/huangyong/blog/209339" title="Shiro 之 入口：EnvironmentLoaderListener">Shiro 之 入口：EnvironmentLoader...</a>
	</li>
				<li>
		<span class="date">2014/04/01</span>
		<a href="http://my.oschina.net/huangyong/blog/215153" title="Shiro 源码分析">Shiro 源码分析</a>
	</li>
			</ul>
</div>
<script type="text/javascript" src="/action/visit/blog?id=208783" defer="defer"></script>
<script type="text/javascript" src="/js/syntax-highlighter-2.1.382/scripts/brush.js"></script>
<link type="text/css" rel="stylesheet" href="/js/syntax-highlighter-2.1.382/styles/shCore.css">
<link type="text/css" rel="stylesheet" href="/js/syntax-highlighter-2.1.382/styles/shThemeDefault.css">
<script type="text/javascript"><!--
$(document).ready(function(){
	SyntaxHighlighter.config.clipboardSwf = '/js/syntax-highlighter-2.1.382/scripts/clipboard.swf';
	SyntaxHighlighter.all();
});
//-->
</script>
<!--[if lt IE 7]>
<script type="text/javascript" src="/js/minmax.js"></script>
<![endif]-->
<script type="text/javascript">
<!--
var posting = false;
var upprev_closed = false;
var upprev_hidden = true;

$(document).ready(function(){
    $('.BlogContent img').css('cursor','pointer');
    jQuery.each($('.BlogContent img'),function(idx,v){
    	$(v).wrap("<a href='"+$(this).attr('src')+"' target='_blank'></a>");
    });
	$('#form_comment').ajaxForm({
		dataType: 'json',
		bforeSubmit: function(){
			posting = true;
		},
		success: function(json) {
        	if(json.msg){
				///alert(json.msg);
				$('#cmt_tip').html("<span style='color:#C00;'>"+json.msg+"</span>");
				$('#wmd-input').focus();				
			}else{
				var url = "http://my.oschina.net/huangyong/blog_post?_cmt_blog="+json.blog+"&_cmt_user="+json.user+"&_cmt_id="+json.id;				
        		jQuery.get(url, function(data){
    				$('#form_comment .NoData').hide();
        			$('ul#BlogComments').append(data);
        			$('#form_comment').resetForm();
        		}); 
			}
		}
	});
	
    var at_datas = [];
    $('img.SmallPortrait').each(function(){
        var name = $(this).attr('alt');
        if(jQuery.inArray(name, at_datas) < 0 && name != '${g_user.name}')
            at_datas.push(name);
    });
    $("#form_comment textarea").atWho("@", {data: at_datas});
	$("#form_comment textarea").on("keydown",function(event){
		if((event.metaKey || event.ctrlKey) && event.keyCode==13){
			$("#form_comment").submit();
		}
	});
	$("#submiting").ajaxStart(function(){
	   if(posting){
    	   $('#btn_submit').attr("disabled","disabled");
           $(this).show();
	   }
    });
	$("#submiting").ajaxComplete(function(event,request, settings){
	   if(posting){
           $(this).hide();
    	   $('#btn_submit').attr("disabled","");
	   }
	   posting = false;
    }); 
	
    $(window).scroll(function() {
        var lastScreen;
        if ($("#postform").length > 0)
            lastScreen = getScrollY() + $(window).height() < $("#postform").offset().top * 1 ? false : true;
        else
            lastScreen = getScrollY() + $(window).height() < $(document).height() * 1 ? false : true;
        if (lastScreen && !upprev_closed) {
            $("#RelativeBlogs").stop().animate({right:"0px"});
            upprev_hidden = false;
        }
        else if (upprev_closed && getScrollY() == 0) {
            upprev_closed = false;
        }
        else if (!upprev_hidden) {
            upprev_hidden = true;
            $("#RelativeBlogs").stop().animate({right:"-400px"});
        }
    });
    $("#RelativeBlogs #btn_close").click(function() {
        $("#RelativeBlogs").stop().animate({right:"-400px"});
        upprev_closed = true;
        upprev_hidden = true;
    });
});
function delete_c(nid,uid,cid){
  if(confirm("您确认要删除此篇评论？")){
    var args = "cmt="+cid+"#"+uid+"#"+nid;
    ajax_post("/action/blog/delete_blog_comments?space=223750",args,function(){$("#cmt_"+nid+"_"+uid+"_"+cid).fadeOut();});
  }
}
var replyinline_dup = false;
function ReplyInline(blog,user,reply){
	$('.inline_reply').empty();
	var div_id = '#inline_reply_of_'+blog+'_'+user+'_'+reply;
	$('#inline_reply_id').val(user+'_'+reply);
	$(div_id).html($('#inline_reply_editor').html());
	$('#ccom_content').focus();
	$('#btn_close_inline_reply').click(function(){
		$(div_id).empty();
	});
	var li_id = '#cmt_'+blog+'_'+user+'_'+reply;
	var p_li = $(li_id);
	var tip = $("#ficmp_msg");
	$('#form_inline_comment').ajaxForm({
		dataType: 'json',
		beforeSubmit:function(){
			if(replyinline_dup){
			    tip.html("正在发表评论，请勿重复提交");
				return false;
			}
			replyinline_dup = true;
			return true;
		},
    	success: function(json) {
			tip.html("");
        	if(json.msg){                                                                                                       
				tip.html(json.msg);
				replyinline_dup = false;
        	}
        	else if(json.id){
    			ajax_post("http://my.oschina.net/blog/show_post","_cmt_user="+"&_cmt_id="+json.id,function(html){
					if(html.length > 0){
						$(html).insertAfter(p_li);
						$(div_id).empty();
					}else{
						tip.html("获取评论失败");
					}
					setTimeout(function(){
    					replyinline_dup = false;
					},5000)
				});
        	}
    	}
	});
}
function edit_catalogs(qid){
	popup("/set-catalogs?parent=1&type=3&id="+qid);
}
function vote(blogid){
		alert("必须登录后才能操作 :)");
	}
function toggle_recomm(blogid){
	ajax_post("/action/blog/toggle_recomm","id="+blogid,function(html){
		if(html == '-1')
			alert("文章不存在");
		else if(html == 0){
			$('#lnk_recomm_'+blogid).removeClass('recommend');
			$('#lnk_recomm_'+blogid).text("未推荐");
		}
		else if(html == 1){
			$('#lnk_recomm_'+blogid).addClass('recommend');
			$('#lnk_recomm_'+blogid).text("已推荐");
		}
	});
}
	var textbox = $("#wmd-input").textbox({
		maxLength: 1000,
    	onInput: function(event, status) {
			var txt = jQuery.trim($("#wmd-input").val());
    	}
	});	
	function insert_projects() {
		textbox.insertText('#此处输入软件名#');
		$('#TweetEmotions').removeAttr('txt_id');
	}
	function insert_projects_c() {
    	var combox = $("#ccom_content").textbox({
    		maxLength: 1000,
        	onInput: function(event, status) {
    			var txt = jQuery.trim($("#ccom_content").val());
        	}
    	});	
		combox.insertText('#此处输入软件名#');
		$('#TweetEmotions').removeAttr('txt_id');
	}
	function insert_emotions(id,obj) {
		if(id) {
			$('#TweetEmotions').attr('txt_id',id);
			var thiz = $(obj);
			var offset = thiz.offset();
			var poffset = thiz.offsetParent().offset();
        	var left = offset.left-poffset.left;
        	var top = offset.top-poffset.top;
			$('#TweetFormPopupWraper').css({'top':top+25 +'px','left':left+'px'});
		}
		else {
			$('#TweetFormPopupWraper').css({'top':'','left':''});
			$('#TweetEmotions').removeAttr('txt_id');
		}
		$('#TweetEmotions').show();
		$('#TweetImages').hide();
		$('#TweetFormPopupArrow').removeClass('projects');
		$('#TweetFormPopupArrow').removeClass('images');
		$('#TweetFormPopupArrow').addClass('emotions');
		$('#TweetFormPopupWraper').slideDown('fast');
	}
	function ins_e(idx){
		var txt_id = $('#TweetEmotions').attr('txt_id');
		if(!txt_id)
			textbox.insertText('['+idx+']');
		else {
			insertAtCursor(txt_id,'['+idx+']');
		}
		$('#TweetFormPopupWraper').hide();
		return false;
	}
	function insertAtCursor(tbid,str) {
		var tb = document.getElementById(tbid);
        if (document.selection){
			tb.focus();
			var r = document.selection.createRange();
            document.selection.empty();
            r.text = str;
            r.collapse();
            r.select();
        }
        else{
            var newstart = tb.selectionStart+str.length;
            tb.value=tb.value.substr(0,tb.selectionStart)+str+tb.value.substring(tb.selectionEnd);
            tb.selectionStart = newstart;
            tb.selectionEnd = newstart;
        }
	}
//-->
</script></div>
	<div class="clear"></div>
	<div id="OSC_Footer"><style>
.oscapp {text-align:left; width:220px;}
.oscapp span {float:left;width:140px;}
.oscapp a {float:left;text-indent:-9999em;width:16px;margin-left:8px;}
.oscapp a.android {background:url('/img/android.gif') no-repeat left center;}
.oscapp a.iphone {background:url('/img/iphone.gif') no-repeat left center;}
.oscapp a.wp7 {background:url('/img/wp7.gif') no-repeat left center;}
</style>
<table width="100%"><tbody><tr>
<td align="left">© 开源中国(OsChina.NET) | <a href="http://www.oschina.net/home/aboutosc">关于我们</a> | <a href="mailto:oschina.net@gmail.com">广告联系</a> | <a href="http://weibo.com/oschina2010" target="_blank">@新浪微博</a> | <a href="http://m.oschina.net/">开源中国手机版</a> | <a href="http://www.miitbeian.gov.cn/" target="_blank" style="color:#737573;text-decoration:none;">粤ICP备12009483号-3</a></td>
<td class="oscapp">
	<span>开源中国手机客户端：</span>
	<a href="http://www.oschina.net/app" class="android" title="Android客户端">Android</a>
	<a href="http://www.oschina.net/app" class="iphone" title="iPhone 客户端">iPhone</a>
	<a href="http://www.oschina.net/app" class="wp7" title="Windows Phone 客户端">WP7</a>
</td>
</tr>
</tbody></table>
<script type="text/javascript">
<!--
if (top.location != self.location)top.location=self.location;
//-->
</script></div>
</div>


<script type="text/javascript" src="/action/visit/space?id=223750"></script>
<script type="text/javascript" src="/js/2014/ImageTool.js?20140124"></script>
<script type="text/javascript">
<!--
$(document).ready(function() {

	SelectStyle("#search-item",".search_list");
	$('.Tweet .photo img').live("click",function(){
		var T=$(this);
		var t=this;
		var bigImg = T.attr('bi');
		var smallImg = T.attr('si');
		var src = T.attr('src');
		var newsrc = (bigImg == src)?smallImg:bigImg;
		var imgId = T.attr('id');
		if(T.parent().attr("id") == "img_container"){
			T.parent().replaceWith(T);
			T.removeAttr("style");
			T.removeAttr("width");
			T.removeAttr("height");
		}
		if(newsrc == bigImg){
    		var loading=$('<img alt="loading" src="/img/loading.gif"/>');
			var top = T.position().top+T.height()/2-8;
			var left = T.position().left+T.width()/2-8;
			loading.css({
				'position':'absolute',
				'z-index':999,
				'top':top,
				'left':left
			});
    		T.before(loading);
			var tImg=new Image();
			tImg.src=newsrc;
			tImg.onload=function(){afterImgLoad(T,loading,imgId,newsrc,bigImg);};
		}
		else{
			T.attr("src",newsrc);
			$('#img_menu_'+imgId).remove();
		}
		return false;
	});
	
	$(".tweet_thumb_wrapper").mouseenter(function(){
		$(this).find(".tweet_play_video").css("opacity",1);
	}).mouseleave(function(){
		$(this).find(".tweet_play_video").css("opacity",0.7);
	});

    $("#TForm textarea").atWho("@", function(query, callback){
        jQuery.ajax({
            type:'POST',
            url:"/action/tweet/at_suggest",
            data:{'q':query},
            dataType:'json',
            success:function(json){
                callback(json);
            }
        });
    });
	
	toggle_tweet_video = function(id){
		$("#tweet_video_thumb_"+id).toggle();
		var video = $("#tweet_video_"+id).toggle();
		video.siblings(".tweet_video_operation,.tweet_thumb_wrapper").toggle();
	};
	
	function afterImgLoad(T,loading,imgId,url,bigImg){
		var lnks = "<div id='img_menu_"+imgId+"' class='ImgMenu'>";
		lnks += "<a href='#' onclick='$(\"#"+imgId+"\").click();return false;'>收起</a>";
		lnks += "<a href='javascript:void(0);' onclick='rotate(this,\""+imgId+"\",0);' id='rotate_btn'>旋转</a>";
		lnks += "<a href='"+bigImg+"' target='_blank'>查看原图</a></div>";			
		loading.remove();
		T.attr("src",url);
		T.before(lnks);
	}
});

function set_fellow_memo(fid,fname){
	popup("/action/ajax/set_fellow_memo","friend="+fid+"&name="+fname);
}

function deleteMsgs(uid, fid, fname){
	if(!confirm("你确认要清除与‘"+fname+"’的所有留言信息吗？"))
		return ;
	var args = "user="+uid+"&friend="+fid;
	ajax_post("/action/msg/delete_user",args,function(html){
		if(html.length > 0)
			alert(html);
		else{
			$('#Msg_'+fid).fadeOut();
		}
	});
}

function follow_user(uid, uname){
	just_follow(uid, uname,'${g_user.id}'); //oschina.js
}

function unfollow_user(uid, uname){
	if(confirm("确定不再关注" + uname + "了吗？"))
	just_unfollow(uid,'${g_user.id}',function(){
		alert('已取消对 ' + uname + ' 的关注');
	});
}

function tweet_reply(logid){
	var r = $('#LogReply_'+logid);
	if(!r.is(":hidden")){
		close_tweet_reply(logid);
		return ;
	}
	r.html("<div class='TweetRplsWrapper'><span class='loading'>正在加载评论，请稍候...</span></div>")
	r.show();
	r.load("http://my.oschina.net/huangyong/tweet-rpls?log="+logid,function(){
		$('#edt_tweet_post_'+logid).focus();
        var at_datas = [];
        $(this).find("img.SmallPortrait").each(function(){
            var name = $(this).attr('alt');
            if(jQuery.inArray(name, at_datas) < 0 && name != '${g_user.name}')
                at_datas.push(name);
        });
        $(this).find("input.TXT_TweetRpl_Text").atWho("@", {data: at_datas});
        $('#TweetReplyForm_'+logid).ajaxForm({
        	dataType: 'json',
			beforeSubmit: function(arr, form, options){
				$('#BTN_TweetReply_'+logid).attr('disabled','disabled');
			},
            success: function(json) {
            	if(json.msg){
        			alert(json.msg);
            	}else if(json.log){
					$('#log_reply_count_'+logid).text(json.reply_count);
        			//插入新评论					
					ajax_get("/action/ajax/get_tweet_reply?id=" + json.log,true,function(html){
						$('#LogReply_'+logid+' ul').prepend(html);
					});
					$('#edt_tweet_post_'+logid).val('');
            	}
				$('#BTN_TweetReply_'+logid).removeAttr('disabled');
            }
        });
	});
}
function close_tweet_reply(logid){
	$('#LogReply_'+logid).empty();
	$('#LogReply_'+logid).hide();
	$('#Logs .userlogs li').removeClass('hover');
}
function reply_rtweet(logid, rid, toname){
	var edtPost = $('#edt_tweet_post_' + logid);
	var old_v = edtPost.val();
	if(old_v.length > 0)
		edtPost.val(old_v + ',@'+toname+' ');
	else
		edtPost.val('回复 @'+toname+' : ');
	edtPost.focus();
	edtPost.caretPos(edtPost.val().length); }
function delete_tweet(logid){
	if(confirm("确认要删除这条信息吗？"))
	ajax_post("/action/tweet/delete?log="+logid+"&user=${g_user.id}","",function(html){
		if(html.length==0){
			var elem = $('#LI_'+logid);
			if(elem.length > 0)
				$('#LI_'+logid).fadeOut();
			else
				location.reload();
		}
	});
}
function delete_tweet_reply(logid){
	if(confirm("确认要删除这条评论吗？"))
	ajax_post("/action/tweet/delete_reply?id="+logid+"&user=${g_user.id}","",function(html){
		if(html.length==0)
			$('#TweetReply_'+logid).fadeOut();
	});
}

function delete_blog(blog_id){
    if(!confirm("文章删除后无法恢复，请确认是否删除此篇文章？")) return;
    ajax_post("/action/blog/delete?id="+blog_id+"&user=${g_user.id}&user_code=${g_user.activate_code}","",function(html){
    	location.href="http://my.oschina.net/huangyong/blog";
    });
}

function SelectStyle(on,option){
	var currentSort = $(on).attr('id');
	var currentText = $(option+" li."+currentSort+" a").html();
	$(on + " .text").html(currentText);
	$(on + " .text").hover(function(){
		$(this).addClass("hover")
	},function(){
		$(this).removeClass("hover")
	});
	$(option+" li a").each(function(index){
		$(this).click(function(){
			thishtml = $(this).html();
			$(on + " .text").removeClass("on").html(thishtml);		
			$(".selectbox select ").find("option").removeAttr('selected').eq(index).attr("selected","selected");	
			$(option).hide()
			return false;
		});
		
	});		
	
	$(".selectbox").click(function(){		
		$(option).toggle();
		$(on + " .text").toggleClass("on");		
		return false;
	});
	$(document).click(function(){
		$(option).hide();	
		$(on + " .text").removeClass("on");
	});
	$(document).trigger('click');

}

//-->
</script>


<!-- Generated by OsChina.NET (init:0[ms],page:69[ms],ip:124.193.144.130) --><div id="fancybox-tmp"></div><div id="fancybox-loading"><div></div></div><div id="fancybox-overlay"></div><div id="fancybox-wrap"><div id="fancybox-outer"><div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div><div id="fancybox-content"></div><a id="fancybox-close"></a><div id="fancybox-title"></div><a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a><a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a></div></div><div id="topcontrol" title="回到顶部" style="position: fixed; bottom: 165px; right: 100px; cursor: pointer; display: block;"><img src="/img/gotop.gif" style="width:31px; height:31px;"></div><div class="tip-yellowsimple-medal"><div class="tip-inner tip-bg-image"></div><div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div></div><div id="at-view" class="at-view"><ul id="at-view-ul"></ul></div></body></html>